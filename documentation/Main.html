<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=edge"><![endif]-->
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 1.5.4">
<meta name="author" content="ad-rss-lib">
<title>C++ Library for Responsibility Sensitive Safety</title>
<style>
/* Asciidoctor default stylesheet | MIT License | http://asciidoctor.org */
/* Uncomment @import statement below to use as custom stylesheet */
/*@import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700";*/
article,aside,details,figcaption,figure,footer,header,hgroup,main,nav,section,summary{display:block}
audio,canvas,video{display:inline-block}
audio:not([controls]){display:none;height:0}
script{display:none!important}
html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}
a{background:transparent}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
abbr[title]{border-bottom:1px dotted}
b,strong{font-weight:bold}
dfn{font-style:italic}
hr{-moz-box-sizing:content-box;box-sizing:content-box;height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type="button"],input[type="reset"],input[type="submit"]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type="checkbox"],input[type="radio"]{box-sizing:border-box;padding:0}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,*::before,*::after{-moz-box-sizing:border-box;-webkit-box-sizing:border-box;box-sizing:border-box}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;font-weight:400;font-style:normal;line-height:1;position:relative;cursor:auto;tab-size:4;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}
html,body{font-size:100%;height:100%}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.center{margin-left:auto;margin-right:auto}
.stretch{width:100%}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0;direction:ltr}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:none}
p{font-family:inherit;font-weight:400;font-size:1em;line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #ddddd8;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em;height:0}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{font-size:1em;line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0;font-size:1em}
ul.square li ul,ul.circle li ul,ul.disc li ul{list-style:inherit}
ul.square{list-style-type:square}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
abbr,acronym{text-transform:uppercase;font-size:90%;color:rgba(0,0,0,.8);border-bottom:1px dotted #ddd;cursor:help}
abbr{text-transform:none}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote cite{display:block;font-size:.9375em;color:rgba(0,0,0,.6)}
blockquote cite::before{content:"\2014 \0020"}
blockquote cite a,blockquote cite a:visited{color:rgba(0,0,0,.6)}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:solid 1px #dedede}
table thead,table tfoot{background:#f7f8f7}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt,table tr:nth-of-type(even){background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{display:table-cell;line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.clearfix::before,.clearfix::after,.float-group::before,.float-group::after{content:" ";display:table}
.clearfix::after,.float-group::after{clear:both}
*:not(pre)>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background-color:#f7f7f8;-webkit-border-radius:4px;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed;word-wrap:break-word}
*:not(pre)>code.nobreak{word-wrap:normal}
*:not(pre)>code.nowrap{white-space:nowrap}
pre,pre>code{line-height:1.45;color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;text-rendering:optimizeSpeed}
em em{font-style:normal}
strong strong{font-weight:400}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background-color:#f7f7f7;border:1px solid #ccc;-webkit-border-radius:3px;border-radius:3px;-webkit-box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em white inset;box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em #fff inset;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menuref{color:#000}
.menuseq b:not(.caret),.menuref{font-weight:inherit}
.menuseq{word-spacing:-.02em}
.menuseq b.caret{font-size:1.25em;line-height:.8}
.menuseq i.caret{font-weight:bold;text-align:center;width:.45em}
b.button::before,b.button::after{position:relative;top:-1px;font-weight:400}
b.button::before{content:"[";padding:0 3px 0 2px}
b.button::after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin-left:auto;margin-right:auto;margin-top:0;margin-bottom:0;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header::before,#header::after,#content::before,#content::after,#footnotes::before,#footnotes::after,#footer::before,#footer::after{content:" ";display:table}
#header::after,#content::after,#footnotes::after,#footer::after{clear:both}
#content{margin-top:1.25em}
#content::before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #ddddd8}
#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #ddddd8;padding-bottom:8px}
#header .details{border-bottom:1px solid #ddddd8;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:-ms-flexbox;display:-webkit-flex;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span::before{content:"\00a0\2013\00a0"}
#header .details br+span.author::before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark::before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber::after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #ddddd8;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #efefed;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
#toc.toc2{margin-top:0!important;background-color:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #efefed;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #efefed;left:auto;right:0}}
@media screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:100%;background-color:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:rgba(255,255,255,.8);line-height:1.44}
#content{margin-bottom:.625em}
.sect1{padding-bottom:.625em}
@media screen and (min-width:768px){#content{margin-bottom:1.25em}
.sect1{padding-bottom:1.25em}}
.sect1:last-child{padding-bottom:0}
.sect1+.sect1{border-top:1px solid #efefed}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor::before,h2>a.anchor::before,h3>a.anchor::before,#toctitle>a.anchor::before,.sidebarblock>.content>.title>a.anchor::before,h4>a.anchor::before,h5>a.anchor::before,h6>a.anchor::before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock.fit-content>caption.title{white-space:nowrap;width:0}
.paragraph.lead>p,#preamble>.sectionbody>[class="paragraph"]:first-of-type p{font-size:1.21875em;line-height:1.6;color:rgba(0,0,0,.85)}
table.tableblock #preamble>.sectionbody>[class="paragraph"]:first-of-type p{font-size:inherit}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #ddddd8;color:rgba(0,0,0,.6)}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border-style:solid;border-width:1px;border-color:#e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;-webkit-border-radius:4px;border-radius:4px}
.exampleblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child{margin-bottom:0}
.sidebarblock{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
.sidebarblock>:first-child{margin-top:0}
.sidebarblock>:last-child{margin-bottom:0}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock pre:not(.highlight),.listingblock pre[class="highlight"],.listingblock pre[class^="highlight "],.listingblock pre.CodeRay,.listingblock pre.prettyprint{background:#f7f7f8}
.sidebarblock .literalblock pre,.sidebarblock .listingblock pre:not(.highlight),.sidebarblock .listingblock pre[class="highlight"],.sidebarblock .listingblock pre[class^="highlight "],.sidebarblock .listingblock pre.CodeRay,.sidebarblock .listingblock pre.prettyprint{background:#f2f1f1}
.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{-webkit-border-radius:4px;border-radius:4px;word-wrap:break-word;padding:1em;font-size:.8125em}
.literalblock pre.nowrap,.literalblock pre[class].nowrap,.listingblock pre.nowrap,.listingblock pre[class].nowrap{overflow-x:auto;white-space:pre;word-wrap:normal}
@media screen and (min-width:768px){.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{font-size:.90625em}}
@media screen and (min-width:1280px){.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{font-size:1em}}
.literalblock.output pre{color:#f7f7f8;background-color:rgba(0,0,0,.9)}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;-webkit-border-radius:4px;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.listingblock>.content{position:relative}
.listingblock code[data-lang]::before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:#999}
.listingblock:hover code[data-lang]::before{display:block}
.listingblock.terminal pre .command::before{content:attr(data-prompt);padding-right:.5em;color:#999}
.listingblock.terminal pre .command:not([data-prompt])::before{content:"$"}
table.pyhltable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.pyhltable td{vertical-align:top;padding-top:0;padding-bottom:0;line-height:1.45}
table.pyhltable td.code{padding-left:.75em;padding-right:0}
pre.pygments .lineno,table.pyhltable td:not(.code){color:#999;padding-left:0;padding-right:.5em;border-right:1px solid #ddddd8}
pre.pygments .lineno{display:inline-block;margin-right:.25em}
table.pyhltable .linenodiv{background:none!important;padding-right:0!important}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock blockquote p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote::before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.5em;margin-right:.5ex;text-align:right}
.quoteblock .quoteblock{margin-left:0;margin-right:0;padding:.5em 0;border-left:3px solid rgba(0,0,0,.6)}
.quoteblock .quoteblock blockquote{padding:0 0 0 .75em}
.quoteblock .quoteblock blockquote::before{display:none}
.verseblock{margin:0 1em 1.25em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract{margin:0 1em 1.25em;display:block}
.quoteblock.abstract>.title{margin:0 0 .375em;font-size:1.15em;text-align:center}
.quoteblock.abstract blockquote,.quoteblock.abstract blockquote p{word-spacing:0;line-height:1.6}
.quoteblock.abstract blockquote::before,.quoteblock.abstract p::before{display:none}
table.tableblock{max-width:100%;border-collapse:separate}
p.tableblock:last-child{margin-bottom:0}
td.tableblock>.content{margin-bottom:-1.25em}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all>thead>tr>.tableblock,table.grid-all>tbody>tr>.tableblock{border-width:0 1px 1px 0}
table.grid-all>tfoot>tr>.tableblock{border-width:1px 1px 0 0}
table.grid-cols>*>tr>.tableblock{border-width:0 1px 0 0}
table.grid-rows>thead>tr>.tableblock,table.grid-rows>tbody>tr>.tableblock{border-width:0 0 1px}
table.grid-rows>tfoot>tr>.tableblock{border-width:1px 0 0}
table.grid-all>*>tr>.tableblock:last-child,table.grid-cols>*>tr>.tableblock:last-child{border-right-width:0}
table.grid-all>tbody>tr:last-child>.tableblock,table.grid-all>thead:last-child>tr>.tableblock,table.grid-rows>tbody>tr:last-child>.tableblock,table.grid-rows>thead:last-child>tr>.tableblock{border-bottom-width:0}
table.frame-all{border-width:1px}
table.frame-sides{border-width:0 1px}
table.frame-topbot,table.frame-ends{border-width:1px 0}
table.stripes-all tr,table.stripes-odd tr:nth-of-type(odd){background:#f8f8f7}
table.stripes-none tr,table.stripes-odd tr:nth-of-type(even){background:none}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{display:table-cell;line-height:1.6;background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
td>div.verse{white-space:pre}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
ol>li p,ul>li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.checklist,ul.none,ol.none,ul.no-bullet,ol.no-bullet,ol.unnumbered,ul.unstyled,ol.unstyled{list-style-type:none}
ul.no-bullet,ol.no-bullet,ol.unnumbered{margin-left:.625em}
ul.unstyled,ol.unstyled{margin-left:0}
ul.checklist{margin-left:.625em}
ul.checklist li>p:first-child>.fa-square-o:first-child,ul.checklist li>p:first-child>.fa-check-square-o:first-child{width:1.25em;font-size:.8em;position:relative;bottom:.125em}
ul.checklist li>p:first-child>input[type="checkbox"]:first-child{margin-right:.25em}
ul.inline{display:-ms-flexbox;display:-webkit-box;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap;list-style:none;margin:0 0 .625em -1.25em}
ul.inline>li{margin-left:1.25em}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist td:not([class]):first-child{padding:.4em .75em 0;line-height:1;vertical-align:top}
.colist td:not([class]):first-child img{max-width:none}
.colist td:not([class]):last-child{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:solid 4px #fff;-webkit-box-shadow:0 0 0 1px #ddd;box-shadow:0 0 0 1px #ddd}
.imageblock.left,.imageblock[style*="float: left"]{margin:.25em .625em 1.25em 0}
.imageblock.right,.imageblock[style*="float: right"]{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em;border-width:1px 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none;margin-left:-1.05em}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
.gist .file-data>table{border:0;background:#fff;width:100%;margin-bottom:0}
.gist .file-data>table td.line-data{width:99%}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background-color:#00fafa}
.black{color:#000}
.black-background{background-color:#000}
.blue{color:#0000bf}
.blue-background{background-color:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background-color:#fa00fa}
.gray{color:#606060}
.gray-background{background-color:#7d7d7d}
.green{color:#006000}
.green-background{background-color:#007d00}
.lime{color:#00bf00}
.lime-background{background-color:#00fa00}
.maroon{color:#600000}
.maroon-background{background-color:#7d0000}
.navy{color:#000060}
.navy-background{background-color:#00007d}
.olive{color:#606000}
.olive-background{background-color:#7d7d00}
.purple{color:#600060}
.purple-background{background-color:#7d007d}
.red{color:#bf0000}
.red-background{background-color:#fa0000}
.silver{color:#909090}
.silver-background{background-color:#bcbcbc}
.teal{color:#006060}
.teal-background{background-color:#007d7d}
.white{color:#bfbfbf}
.white-background{background-color:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background-color:#fafa00}
span.icon>.fa{cursor:default}
a span.icon>.fa{cursor:inherit}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note::before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip::before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning::before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution::before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important::before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background-color:rgba(0,0,0,.8);-webkit-border-radius:100px;border-radius:100px;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]::after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,span.alt{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background-color:#fffef7;border-color:#e0e0dc;-webkit-box-shadow:0 1px 4px #e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@page{margin:1.25cm .75cm}
@media print{*{-webkit-box-shadow:none!important;box-shadow:none!important;text-shadow:none!important}
html{font-size:80%}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare)::after,a[href^="https:"]:not(.bare)::after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]::after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #ddddd8!important;padding-bottom:0!important}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span::before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]::before{display:block}
#footer{padding:0 .9375em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
@media print,amzn-kf8{#header>h1:first-child{margin-top:1.25rem}
.sect1{padding:0!important}
.sect1+.sect1{border:0}
#footer{background:none}
#footer-text{color:rgba(0,0,0,.6);font-size:.9em}}
@media amzn-kf8{#header,#content,#footnotes,#footer{padding:0}}
</style>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.5.0/css/font-awesome.min.css">
<style>
/* Stylesheet for CodeRay to match GitHub theme | MIT License | http://foundation.zurb.com */
/*pre.CodeRay {background-color:#f7f7f8;}*/
.CodeRay .line-numbers{border-right:1px solid #d8d8d8;padding:0 0.5em 0 .25em}
.CodeRay span.line-numbers{display:inline-block;margin-right:.5em;color:rgba(0,0,0,.3)}
.CodeRay .line-numbers strong{color:rgba(0,0,0,.4)}
table.CodeRay{border-collapse:separate;border-spacing:0;margin-bottom:0;border:0;background:none}
table.CodeRay td{vertical-align: top;line-height:1.45}
table.CodeRay td.line-numbers{text-align:right}
table.CodeRay td.line-numbers>pre{padding:0;color:rgba(0,0,0,.3)}
table.CodeRay td.code{padding:0 0 0 .5em}
table.CodeRay td.code>pre{padding:0}
.CodeRay .debug{color:#fff !important;background:#000080 !important}
.CodeRay .annotation{color:#007}
.CodeRay .attribute-name{color:#000080}
.CodeRay .attribute-value{color:#700}
.CodeRay .binary{color:#509}
.CodeRay .comment{color:#998;font-style:italic}
.CodeRay .char{color:#04d}
.CodeRay .char .content{color:#04d}
.CodeRay .char .delimiter{color:#039}
.CodeRay .class{color:#458;font-weight:bold}
.CodeRay .complex{color:#a08}
.CodeRay .constant,.CodeRay .predefined-constant{color:#008080}
.CodeRay .color{color:#099}
.CodeRay .class-variable{color:#369}
.CodeRay .decorator{color:#b0b}
.CodeRay .definition{color:#099}
.CodeRay .delimiter{color:#000}
.CodeRay .doc{color:#970}
.CodeRay .doctype{color:#34b}
.CodeRay .doc-string{color:#d42}
.CodeRay .escape{color:#666}
.CodeRay .entity{color:#800}
.CodeRay .error{color:#808}
.CodeRay .exception{color:inherit}
.CodeRay .filename{color:#099}
.CodeRay .function{color:#900;font-weight:bold}
.CodeRay .global-variable{color:#008080}
.CodeRay .hex{color:#058}
.CodeRay .integer,.CodeRay .float{color:#099}
.CodeRay .include{color:#555}
.CodeRay .inline{color:#000}
.CodeRay .inline .inline{background:#ccc}
.CodeRay .inline .inline .inline{background:#bbb}
.CodeRay .inline .inline-delimiter{color:#d14}
.CodeRay .inline-delimiter{color:#d14}
.CodeRay .important{color:#555;font-weight:bold}
.CodeRay .interpreted{color:#b2b}
.CodeRay .instance-variable{color:#008080}
.CodeRay .label{color:#970}
.CodeRay .local-variable{color:#963}
.CodeRay .octal{color:#40e}
.CodeRay .predefined{color:#369}
.CodeRay .preprocessor{color:#579}
.CodeRay .pseudo-class{color:#555}
.CodeRay .directive{font-weight:bold}
.CodeRay .type{font-weight:bold}
.CodeRay .predefined-type{color:inherit}
.CodeRay .reserved,.CodeRay .keyword {color:#000;font-weight:bold}
.CodeRay .key{color:#808}
.CodeRay .key .delimiter{color:#606}
.CodeRay .key .char{color:#80f}
.CodeRay .value{color:#088}
.CodeRay .regexp .delimiter{color:#808}
.CodeRay .regexp .content{color:#808}
.CodeRay .regexp .modifier{color:#808}
.CodeRay .regexp .char{color:#d14}
.CodeRay .regexp .function{color:#404;font-weight:bold}
.CodeRay .string{color:#d20}
.CodeRay .string .string .string{background:#ffd0d0}
.CodeRay .string .content{color:#d14}
.CodeRay .string .char{color:#d14}
.CodeRay .string .delimiter{color:#d14}
.CodeRay .shell{color:#d14}
.CodeRay .shell .delimiter{color:#d14}
.CodeRay .symbol{color:#990073}
.CodeRay .symbol .content{color:#a60}
.CodeRay .symbol .delimiter{color:#630}
.CodeRay .tag{color:#008080}
.CodeRay .tag-special{color:#d70}
.CodeRay .variable{color:#036}
.CodeRay .insert{background:#afa}
.CodeRay .delete{background:#faa}
.CodeRay .change{color:#aaf;background:#007}
.CodeRay .head{color:#f8f;background:#505}
.CodeRay .insert .insert{color:#080}
.CodeRay .delete .delete{color:#800}
.CodeRay .change .change{color:#66f}
.CodeRay .head .head{color:#f4f}
</style>
</head>
<body class="book toc2 toc-left">
<div id="header">
<h1>C++ Library for Responsibility Sensitive Safety</h1>
<div class="details">
<span id="author" class="author">ad-rss-lib</span><br>
<span id="revnumber">version 1.2,</span>
<span id="revdate">2019-11-22</span>
</div>
<div id="toc" class="toc2">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel0">
<li><a href="#_overview">Overview</a>
<ul class="sectlevel1">
<li><a href="#_introduction">1. Introduction</a>
<ul class="sectlevel2">
<li><a href="#_rss_summary">1.1. RSS Summary</a></li>
<li><a href="#_purpose_and_scope_of_this_library">1.2. Purpose and Scope of this Library</a></li>
<li><a href="#_overview_of_the_document">1.3. Overview of the Document</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_high_level_design">High Level Design</a>
<ul class="sectlevel1">
<li><a href="#Section::HLD::Implementation">2. ad-rss-lib Realization</a>
<ul class="sectlevel2">
<li><a href="#_rss_checks_and_response">2.1. RSS checks and response</a>
<ul class="sectlevel3">
<li><a href="#_longitudinal_conflicts">2.1.1. Longitudinal conflicts</a></li>
<li><a href="#_lateral_conflicts">2.1.2. Lateral conflicts</a></li>
<li><a href="#_combining_longitudinal_and_lateral_response">2.1.3. Combining longitudinal and lateral response</a></li>
<li><a href="#_combining_all_situations_of_a_given_point_in_time">2.1.4. Combining all situations of a given point in time</a></li>
<li><a href="#Section::HLD::Implementation::EvasiveManeuvers">2.1.5. Evasive maneuvers</a></li>
<li><a href="#_handling_of_intersections">2.1.6. Handling of Intersections</a></li>
<li><a href="#_response_time_and_other_parameters">2.1.7. Response Time and Other Parameters</a></li>
</ul>
</li>
<li><a href="#Section::SituationBasedCS">2.2. Situation-Based Coordinate System</a>
<ul class="sectlevel3">
<li><a href="#Section::SituationBasedCS::comparing_velocities">2.2.1. Comparing movements in lane-based coordinate systems</a></li>
<li><a href="#Section::SituationBasedCS::ChosenDesign">2.2.2. Chosen Design: Individual Situation-Based Coordinate System</a></li>
<li><a href="#_design_alternative_iterative_approach_optional">2.2.3. Design alternative: Iterative Approach [optional]</a></li>
</ul>
</li>
<li><a href="#_summary_3">2.3. Summary</a>
<ul class="sectlevel3">
<li><a href="#_key_decisions">2.3.1. Key decisions</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#Section::HLD::SystemArchitecture">3. RSS System Architecture Overview</a>
<ul class="sectlevel2">
<li><a href="#_sense">3.1. Sense</a>
<ul class="sectlevel3">
<li><a href="#_sensorsubsystem">3.1.1. SensorSubsystem</a></li>
</ul>
</li>
<li><a href="#_plan">3.2. Plan</a>
<ul class="sectlevel3">
<li><a href="#_planningsubsystem">3.2.1. PlanningSubsystem</a></li>
</ul>
</li>
<li><a href="#_act">3.3. Act</a>
<ul class="sectlevel3">
<li><a href="#_actuatorsubsystem">3.3.1. ActuatorSubsystem</a></li>
</ul>
</li>
<li><a href="#_rss">3.4. RSS</a>
<ul class="sectlevel3">
<li><a href="#_rsssubsystem">3.4.1. RssSubsystem</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#Section::HLD::SoftwareArchitecture">4. ad-rss-lib: Software Architecture</a>
<ul class="sectlevel2">
<li><a href="#_static_view">4.1. Static View</a>
<ul class="sectlevel3">
<li><a href="#_interfaces">4.1.1. Interfaces</a></li>
<li><a href="#_datatypes">4.1.2. DataTypes</a></li>
</ul>
</li>
<li><a href="#_dynamic_view">4.2. Dynamic View</a>
<ul class="sectlevel3">
<li><a href="#_rsssituationextractionimpl">4.2.1. RssSituationExtractionImpl</a></li>
<li><a href="#_rsssituationcheckingimpl">4.2.2. RssSituationCheckingImpl</a></li>
<li><a href="#_rssresponseresolvingimpl">4.2.3. RssResponseResolvingImpl</a></li>
<li><a href="#_rssresponsetransformationimpl">4.2.4. RssResponseTransformationImpl</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#Section::HLD::Security">5. Design for Security</a>
<ul class="sectlevel2">
<li><a href="#_architecture_and_dataflow">5.1. Architecture and dataflow</a></li>
<li><a href="#_rss_input_data_code_worldmodel_code">5.2. RSS input data (<code>WorldModel</code>)</a>
<ul class="sectlevel3">
<li><a href="#_input_data_source">5.2.1. Input data source</a></li>
<li><a href="#_validity_of_input_data_and_error_handling">5.2.2. Validity of input data and error handling</a></li>
<li><a href="#_non_functional_requirements">5.2.3. Non-functional requirements</a></li>
</ul>
</li>
<li><a href="#_rss_output_data_code_accelerationrestriction_code">5.3. RSS output data (<code>AccelerationRestriction</code>)</a>
<ul class="sectlevel3">
<li><a href="#_output_data_destination">5.3.1. Output data destination</a></li>
<li><a href="#_bounds_on_the_output_data_values">5.3.2. Bounds on the output data values</a></li>
<li><a href="#_bounds_on_the_output_data_size">5.3.3. Bounds on the output data size</a></li>
</ul>
</li>
<li><a href="#_rss_library_code_validation">5.4. RSS library code validation</a>
<ul class="sectlevel3">
<li><a href="#_dependencies">5.4.1. Dependencies</a></li>
<li><a href="#_coding_standards">5.4.2. Coding standards</a></li>
<li><a href="#_compiler_and_compiler_security_flags">5.4.3. Compiler and compiler security flags</a></li>
<li><a href="#_code_analysis">5.4.4. Code analysis</a></li>
<li><a href="#_critical_assets">5.4.5. Critical assets</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#Section::HLD::Safety">6. Design for Safety</a></li>
</ul>
</li>
<li><a href="#_appendix">Appendix</a>
<ul class="sectlevel1">
<li><a href="#Section::ParameterDiscussion">7. Parameter Discussion</a>
<ul class="sectlevel2">
<li><a href="#_decision_on_selected_parameter_values">7.1. Decision on Selected Parameter Values</a>
<ul class="sectlevel3">
<li><a href="#_response_time">7.1.1. Response time</a></li>
<li><a href="#_longitudinal_acceleration">7.1.2. Longitudinal Acceleration</a></li>
<li><a href="#_lateral_acceleration">7.1.3. Lateral Acceleration</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_terminology">8. Terminology</a></li>
<li><a href="#_references">9. References</a></li>
<li><a href="#_revision_history">10. Revision History</a></li>
<li><a href="#_build_ad_rss_lib_and_documentation">11. Build ad-rss-lib and documentation</a>
<ul class="sectlevel2">
<li><a href="#_build_instructions">11.1. Build instructions</a></li>
<li><a href="#_generate_pdf_document">11.2. Generate PDF document</a></li>
<li><a href="#_generate_html_document">11.3. Generate HTML document</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<div id="content">
<div id="preamble">
<div class="sectionbody">
<!-- toc disabled -->
<div class="sidebarblock">
<div class="content">
<div class="paragraph">
<p>Copyright (c) 2018-2019 Intel Corporation</p>
</div>
<div class="paragraph">
<p>This library is free software; you can redistribute it and/or modify it under the terms of the GNU Library General Public License as published by the Free Software Foundation – terms below.</p>
</div>
<div class="paragraph">
<p>GNU LIBRARY GENERAL PUBLIC LICENSE [Version 2.1]</p>
</div>
<div class="paragraph">
<p>TERMS AND CONDITIONS FOR COPYING, DISTRIBUTION AND MODIFICATION</p>
</div>
<div class="paragraph">
<p><strong>0.</strong> This License Agreement applies to any software library or other
program which contains a notice placed by the copyright holder or
other authorized party saying it may be distributed under the terms of
this Lesser General Public License (also called “this License”).
Each licensee is addressed as “you”.</p>
</div>
<div class="paragraph">
<p>A “library” means a collection of software functions and/or data
prepared so as to be conveniently linked with application programs
(which use some of those functions and data) to form executables.</p>
</div>
<div class="paragraph">
<p>The “Library”, below, refers to any such software library or work
which has been distributed under these terms.  A “work based on the
Library” means either the Library or any derivative work under
copyright law: that is to say, a work containing the Library or a
portion of it, either verbatim or with modifications and/or translated
straightforwardly into another language.  (Hereinafter, translation is
included without limitation in the term “modification”.)</p>
</div>
<div class="paragraph">
<p>“Source code” for a work means the preferred form of the work for
making modifications to it.  For a library, complete source code means
all the source code for all modules it contains, plus any associated
interface definition files, plus the scripts used to control compilation
and installation of the library.</p>
</div>
<div class="paragraph">
<p>Activities other than copying, distribution and modification are not
covered by this License; they are outside its scope.  The act of
running a program using the Library is not restricted, and output from
such a program is covered only if its contents constitute a work based
on the Library (independent of the use of the Library in a tool for
writing it).  Whether that is true depends on what the Library does
and what the program that uses the Library does.</p>
</div>
<div class="paragraph">
<p><strong>1.</strong> You may copy and distribute verbatim copies of the Library&#8217;s
complete source code as you receive it, in any medium, provided that
you conspicuously and appropriately publish on each copy an
appropriate copyright notice and disclaimer of warranty; keep intact
all the notices that refer to this License and to the absence of any
warranty; and distribute a copy of this License along with the
Library.</p>
</div>
<div class="paragraph">
<p>You may charge a fee for the physical act of transferring a copy,
and you may at your option offer warranty protection in exchange for a
fee.</p>
</div>
<div class="paragraph">
<p><strong>2.</strong> You may modify your copy or copies of the Library or any portion
of it, thus forming a work based on the Library, and copy and
distribute such modifications or work under the terms of Section 1
above, provided that you also meet all of these conditions:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>a)</strong> The modified work must itself be a software library.</p>
</li>
<li>
<p><strong>b)</strong> You must cause the files modified to carry prominent notices
stating that you changed the files and the date of any change.</p>
</li>
<li>
<p><strong>c)</strong> You must cause the whole of the work to be licensed at no
charge to all third parties under the terms of this License.</p>
</li>
<li>
<p><strong>d)</strong> If a facility in the modified Library refers to a function or a
table of data to be supplied by an application program that uses
the facility, other than as an argument passed when the facility
is invoked, then you must make a good faith effort to ensure that,
in the event an application does not supply such function or
table, the facility still operates, and performs whatever part of
its purpose remains meaningful.
(For example, a function in a library to compute square roots has
a purpose that is entirely well-defined independent of the
application.  Therefore, Subsection 2d requires that any
application-supplied function or table used by this function must
be optional: if the application does not supply it, the square
root function must still compute square roots.)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>These requirements apply to the modified work as a whole.  If
identifiable sections of that work are not derived from the Library,
and can be reasonably considered independent and separate works in
themselves, then this License, and its terms, do not apply to those
sections when you distribute them as separate works.  But when you
distribute the same sections as part of a whole which is a work based
on the Library, the distribution of the whole must be on the terms of
this License, whose permissions for other licensees extend to the
entire whole, and thus to each and every part regardless of who wrote
it.</p>
</div>
<div class="paragraph">
<p>Thus, it is not the intent of this section to claim rights or contest
your rights to work written entirely by you; rather, the intent is to
exercise the right to control the distribution of derivative or
collective works based on the Library.</p>
</div>
<div class="paragraph">
<p>In addition, mere aggregation of another work not based on the Library
with the Library (or with a work based on the Library) on a volume of
a storage or distribution medium does not bring the other work under
the scope of this License.</p>
</div>
<div class="paragraph">
<p><strong>3.</strong> You may opt to apply the terms of the ordinary GNU General Public
License instead of this License to a given copy of the Library.  To do
this, you must alter all the notices that refer to this License, so
that they refer to the ordinary GNU General Public License, version 2,
instead of to this License.  (If a newer version than version 2 of the
ordinary GNU General Public License has appeared, then you can specify
that version instead if you wish.)  Do not make any other change in
these notices.</p>
</div>
<div class="paragraph">
<p>Once this change is made in a given copy, it is irreversible for
that copy, so the ordinary GNU General Public License applies to all
subsequent copies and derivative works made from that copy.</p>
</div>
<div class="paragraph">
<p>This option is useful when you wish to copy part of the code of
the Library into a program that is not a library.</p>
</div>
<div class="paragraph">
<p><strong>4.</strong> You may copy and distribute the Library (or a portion or
derivative of it, under Section 2) in object code or executable form
under the terms of Sections 1 and 2 above provided that you accompany
it with the complete corresponding machine-readable source code, which
must be distributed under the terms of Sections 1 and 2 above on a
medium customarily used for software interchange.</p>
</div>
<div class="paragraph">
<p>If distribution of object code is made by offering access to copy
from a designated place, then offering equivalent access to copy the
source code from the same place satisfies the requirement to
distribute the source code, even though third parties are not
compelled to copy the source along with the object code.</p>
</div>
<div class="paragraph">
<p><strong>5.</strong> A program that contains no derivative of any portion of the
Library, but is designed to work with the Library by being compiled or
linked with it, is called a “work that uses the Library”.  Such a
work, in isolation, is not a derivative work of the Library, and
therefore falls outside the scope of this License.</p>
</div>
<div class="paragraph">
<p>However, linking a “work that uses the Library” with the Library
creates an executable that is a derivative of the Library (because it
contains portions of the Library), rather than a “work that uses the
library”.  The executable is therefore covered by this License.
Section 6 states terms for distribution of such executables.</p>
</div>
<div class="paragraph">
<p>When a “work that uses the Library” uses material from a header file
that is part of the Library, the object code for the work may be a
derivative work of the Library even though the source code is not.
Whether this is true is especially significant if the work can be
linked without the Library, or if the work is itself a library.  The
threshold for this to be true is not precisely defined by law.</p>
</div>
<div class="paragraph">
<p>If such an object file uses only numerical parameters, data
structure layouts and accessors, and small macros and small inline
functions (ten lines or less in length), then the use of the object
file is unrestricted, regardless of whether it is legally a derivative
work.  (Executables containing this object code plus portions of the
Library will still fall under Section 6.)</p>
</div>
<div class="paragraph">
<p>Otherwise, if the work is a derivative of the Library, you may
distribute the object code for the work under the terms of Section 6.
Any executables containing that work also fall under Section 6,
whether or not they are linked directly with the Library itself.</p>
</div>
<div class="paragraph">
<p><strong>6.</strong> As an exception to the Sections above, you may also combine or
link a “work that uses the Library” with the Library to produce a
work containing portions of the Library, and distribute that work
under terms of your choice, provided that the terms permit
modification of the work for the customer&#8217;s own use and reverse
engineering for debugging such modifications.</p>
</div>
<div class="paragraph">
<p>You must give prominent notice with each copy of the work that the
Library is used in it and that the Library and its use are covered by
this License.  You must supply a copy of this License.  If the work
during execution displays copyright notices, you must include the
copyright notice for the Library among them, as well as a reference
directing the user to the copy of this License.  Also, you must do one
of these things:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>a)</strong> Accompany the work with the complete corresponding
machine-readable source code for the Library including whatever
changes were used in the work (which must be distributed under
Sections 1 and 2 above); and, if the work is an executable linked
with the Library, with the complete machine-readable “work that
uses the Library”, as object code and/or source code, so that the
user can modify the Library and then relink to produce a modified
executable containing the modified Library.  (It is understood
that the user who changes the contents of definitions files in the
Library will not necessarily be able to recompile the application
to use the modified definitions.)</p>
</li>
<li>
<p><strong>b)</strong> Use a suitable shared library mechanism for linking with the
Library.  A suitable mechanism is one that (1) uses at run time a
copy of the library already present on the user&#8217;s computer system,
rather than copying library functions into the executable, and (2)
will operate properly with a modified version of the library, if
the user installs one, as long as the modified version is
interface-compatible with the version that the work was made with.</p>
</li>
<li>
<p><strong>c)</strong> Accompany the work with a written offer, valid for at
least three years, to give the same user the materials
specified in Subsection 6a, above, for a charge no more
than the cost of performing this distribution.</p>
</li>
<li>
<p><strong>d)</strong> If distribution of the work is made by offering access to copy
from a designated place, offer equivalent access to copy the above
specified materials from the same place.</p>
</li>
<li>
<p><strong>e)</strong> Verify that the user has already received a copy of these
materials or that you have already sent this user a copy.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>For an executable, the required form of the “work that uses the
Library” must include any data and utility programs needed for
reproducing the executable from it.  However, as a special exception,
the materials to be distributed need not include anything that is
normally distributed (in either source or binary form) with the major
components (compiler, kernel, and so on) of the operating system on
which the executable runs, unless that component itself accompanies
the executable.</p>
</div>
<div class="paragraph">
<p>It may happen that this requirement contradicts the license
restrictions of other proprietary libraries that do not normally
accompany the operating system.  Such a contradiction means you cannot
use both them and the Library together in an executable that you
distribute.</p>
</div>
<div class="paragraph">
<p><strong>7.</strong> You may place library facilities that are a work based on the
Library side-by-side in a single library together with other library
facilities not covered by this License, and distribute such a combined
library, provided that the separate distribution of the work based on
the Library and of the other library facilities is otherwise
permitted, and provided that you do these two things:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>a)</strong> Accompany the combined library with a copy of the same work
based on the Library, uncombined with any other library
facilities.  This must be distributed under the terms of the
Sections above.</p>
</li>
<li>
<p><strong>b)</strong> Give prominent notice with the combined library of the fact
that part of it is a work based on the Library, and explaining
where to find the accompanying uncombined form of the same work.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>8.</strong> You may not copy, modify, sublicense, link with, or distribute
the Library except as expressly provided under this License.  Any
attempt otherwise to copy, modify, sublicense, link with, or
distribute the Library is void, and will automatically terminate your
rights under this License.  However, parties who have received copies,
or rights, from you under this License will not have their licenses
terminated so long as such parties remain in full compliance.</p>
</div>
<div class="paragraph">
<p><strong>9.</strong> You are not required to accept this License, since you have not
signed it.  However, nothing else grants you permission to modify or
distribute the Library or its derivative works.  These actions are
prohibited by law if you do not accept this License.  Therefore, by
modifying or distributing the Library (or any work based on the
Library), you indicate your acceptance of this License to do so, and
all its terms and conditions for copying, distributing or modifying
the Library or works based on it.</p>
</div>
<div class="paragraph">
<p><strong>10.</strong> Each time you redistribute the Library (or any work based on the
Library), the recipient automatically receives a license from the
original licensor to copy, distribute, link with or modify the Library
subject to these terms and conditions.  You may not impose any further
restrictions on the recipients' exercise of the rights granted herein.
You are not responsible for enforcing compliance by third parties with
this License.</p>
</div>
<div class="paragraph">
<p><strong>11.</strong> If, as a consequence of a court judgment or allegation of patent
infringement or for any other reason (not limited to patent issues),
conditions are imposed on you (whether by court order, agreement or
otherwise) that contradict the conditions of this License, they do not
excuse you from the conditions of this License.  If you cannot
distribute so as to satisfy simultaneously your obligations under this
License and any other pertinent obligations, then as a consequence you
may not distribute the Library at all.  For example, if a patent
license would not permit royalty-free redistribution of the Library by
all those who receive copies directly or indirectly through you, then
the only way you could satisfy both it and this License would be to
refrain entirely from distribution of the Library.</p>
</div>
<div class="paragraph">
<p>If any portion of this section is held invalid or unenforceable under any
particular circumstance, the balance of the section is intended to apply,
and the section as a whole is intended to apply in other circumstances.</p>
</div>
<div class="paragraph">
<p>It is not the purpose of this section to induce you to infringe any
patents or other property right claims or to contest validity of any
such claims; this section has the sole purpose of protecting the
integrity of the free software distribution system which is
implemented by public license practices.  Many people have made
generous contributions to the wide range of software distributed
through that system in reliance on consistent application of that
system; it is up to the author/donor to decide if he or she is willing
to distribute software through any other system and a licensee cannot
impose that choice.</p>
</div>
<div class="paragraph">
<p>This section is intended to make thoroughly clear what is believed to
be a consequence of the rest of this License.</p>
</div>
<div class="paragraph">
<p><strong>12.</strong> If the distribution and/or use of the Library is restricted in
certain countries either by patents or by copyrighted interfaces, the
original copyright holder who places the Library under this License may add
an explicit geographical distribution limitation excluding those countries,
so that distribution is permitted only in or among countries not thus
excluded.  In such case, this License incorporates the limitation as if
written in the body of this License.</p>
</div>
<div class="paragraph">
<p><strong>13.</strong> The Free Software Foundation may publish revised and/or new
versions of the Lesser General Public License from time to time.
Such new versions will be similar in spirit to the present version,
but may differ in detail to address new problems or concerns.</p>
</div>
<div class="paragraph">
<p>Each version is given a distinguishing version number.  If the Library
specifies a version number of this License which applies to it and
“any later version”, you have the option of following the terms and
conditions either of that version or of any later version published by
the Free Software Foundation.  If the Library does not specify a
license version number, you may choose any version ever published by
the Free Software Foundation.</p>
</div>
<div class="paragraph">
<p><strong>14.</strong> If you wish to incorporate parts of the Library into other free
programs whose distribution conditions are incompatible with these,
write to the author to ask for permission.  For software which is
copyrighted by the Free Software Foundation, write to the Free
Software Foundation; we sometimes make exceptions for this.  Our
decision will be guided by the two goals of preserving the free status
of all derivatives of our free software and of promoting the sharing
and reuse of software generally.</p>
</div>
<div class="paragraph">
<p><mark>#</mark> NO WARRANTY</p>
</div>
<div class="paragraph">
<p><strong>15.</strong> BECAUSE THE LIBRARY IS LICENSED FREE OF CHARGE, THERE IS NO
WARRANTY FOR THE LIBRARY, TO THE EXTENT PERMITTED BY APPLICABLE LAW.
EXCEPT WHEN OTHERWISE STATED IN WRITING THE COPYRIGHT HOLDERS AND/OR
OTHER PARTIES PROVIDE THE LIBRARY “AS IS” WITHOUT WARRANTY OF ANY
KIND, EITHER EXPRESSED OR IMPLIED, INCLUDING, BUT NOT LIMITED TO, THE
IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
PURPOSE.  THE ENTIRE RISK AS TO THE QUALITY AND PERFORMANCE OF THE
LIBRARY IS WITH YOU.  SHOULD THE LIBRARY PROVE DEFECTIVE, YOU ASSUME
THE COST OF ALL NECESSARY SERVICING, REPAIR OR CORRECTION.</p>
</div>
<div class="paragraph">
<p><strong>16.</strong> IN NO EVENT UNLESS REQUIRED BY APPLICABLE LAW OR AGREED TO IN
WRITING WILL ANY COPYRIGHT HOLDER, OR ANY OTHER PARTY WHO MAY MODIFY
AND/OR REDISTRIBUTE THE LIBRARY AS PERMITTED ABOVE, BE LIABLE TO YOU
FOR DAMAGES, INCLUDING ANY GENERAL, SPECIAL, INCIDENTAL OR
CONSEQUENTIAL DAMAGES ARISING OUT OF THE USE OR INABILITY TO USE THE
LIBRARY (INCLUDING BUT NOT LIMITED TO LOSS OF DATA OR DATA BEING
RENDERED INACCURATE OR LOSSES SUSTAINED BY YOU OR THIRD PARTIES OR A
FAILURE OF THE LIBRARY TO OPERATE WITH ANY OTHER SOFTWARE), EVEN IF
SUCH HOLDER OR OTHER PARTY HAS BEEN ADVISED OF THE POSSIBILITY OF SUCH
DAMAGES.</p>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph">
<p>RELEASE NOTES AND DISCLAIMERS</p>
</div>
<div class="paragraph">
<p><em>The following additional terms apply to the C++ Library for RSS (the “Software”)
provided by Intel Corporation (“Intel”) to the recipient (“Recipient”).</em></p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>The Software implements the RSS calculations and rules corresponding to the following scenarios:</p>
<div class="ulist">
<ul>
<li>
<p>Multi-lane roads, i.e. longitudinal and lateral safe distance and proper response determination; and</p>
</li>
<li>
<p>Intersections, i.e. two or more routes of different geometry, rules for intersections of routes, with priority/right of way, and longitudinal and lateral proper response determination. However, in the case of intersections, it is assumed that there is always a lateral conflict.</p>
<div class="literalblock">
<div class="content">
<pre>The following parts of RSS are __NOT__ implemented in this release of the Software:
- Unstructured roads, e.g. parking lots and wide round-abouts;
- Pedestrians, bicyclists and other vulnerable road users;
- Occlusions;
- Longitudinal or lateral evasive maneuvers as defined by RSS; and
- Intersections without a lateral conflict.</pre>
</div>
</div>
</li>
</ul>
</div>
</li>
<li>
<p>Recipient understands, acknowledges and agrees that the Software:</p>
<div class="ulist">
<ul>
<li>
<p>is a pre-production, research version intended for use in a testing simulator;</p>
</li>
<li>
<p>should not be considered full, complete, or fully functional;</p>
</li>
<li>
<p>does not contain all features necessary for a production version of the Software;</p>
</li>
<li>
<p>has not been fully tested (including security testing) and may contain bugs, errors or faults;</p>
</li>
<li>
<p>is not suitable  for commercial or production release as part of a larger system in its current state;</p>
</li>
<li>
<p>may not be suitable for development of transportation testing applications for test tracks or public roads; and</p>
</li>
<li>
<p>has not obtained any regulatory approvals (such as, UL or FCC), or obtained any certifications or qualifications (such as, AEC-Q100) and may therefore not be certified for use in certain countries or environments.</p>
</li>
</ul>
</div>
</li>
<li>
<p>By using the Software, Recipient agrees to the following:</p>
<div class="ulist">
<ul>
<li>
<p>Recipient expressly assumes all risks associated with the use of the Software, which are provided “<em>AS IS</em>” by Intel with all faults.</p>
</li>
</ul>
</div>
</li>
</ol>
</div>
</div>
</div>
</div>
</div>
<h1 id="_overview" class="sect0">Overview</h1>
<div class="sect1">
<h2 id="_introduction">1. Introduction</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The Responsibility-Sensitive Safety (RSS) model is designed to formalize and
contextualize human judgment regarding all multi-agent driving situations and
dilemmas. RSS formalizes terms like dangerous situations, proper response and
notion of blame in a mathematical way. From planning and decision-making
perspective, RSS ensures that the AD system will not issue a command that would
lead to an accident.</p>
</div>
<div class="sect2">
<h3 id="_rss_summary">1.1. RSS Summary</h3>
<div class="paragraph">
<p>The available RSS publications (see <a href="#Table::Terminology">Terminology</a>), can be summarized
as follows:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>RSS continuously monitors the <em>current</em> state of the environment, in order
to determine if the ego vehicle is <em>currently</em> in a safe state. If the ego
vehicle is not in a safe state, RSS will provide a response action that will
bring the car back into a safe state. As a result, in case of an accident, the
ego vehicle cannot be blamed responsible, as it was not causing the collision.</p>
</li>
<li>
<p>A state is regarded as <em>safe</em>, if the ego vehicle is not causing a collision
with another object, under the worst case assumption that the ego vehicle will
accelerate (depending on the situation this can be also a deceleration) at
maximum possible speed during its response time. Hence, RSS does not take the
output of the driving policy into account. However, as RSS uses worst case
assumption on reaction time, acceleration etc., it is guaranteed that, no valid
action of the driving policy can bring the vehicle into an unsafe state, if RSS
regards the current situation as safe.</p>
</li>
<li>
<p>If the ego vehicle is in a <em>dangerous</em> situation, RSS will assure a proper
reaction, that will bring the car back into a safe state. Therefore, it will
impose proper restrictions for the longitudinal and lateral accelerations of
the driving command, that is send to the ego vehicle. Note that this will
assure that the vehicle reacts correctly, but the driving policy still has the
chance to solve the dangerous situation on a more elaborate way, as long as the
desired action is within the RSS limits. The reason is that RSS has only basic
information about the environment, whereas the driving policy can use much more
information, and is able to perform much more sophisticated path finding
strategies.</p>
</li>
<li>
<p>RSS differentiates between <em>longitudinal</em> and <em>lateral</em> conflicts. A
longitudinal conflict means that the distance between the ego vehicle and an
object in front or in the back of the ego vehicle is smaller than the
longitudinal safety distance. Similarly, a lateral conflict arises, if the
distance to the left or right of the ego vehicle to another object is less than
the required lateral safety margin. Depending on the type of conflict, RSS
requires a different response.</p>
</li>
<li>
<p>In addition, RSS differentiates between normal (single- or multi-lane)
roads, intersections and unstructured roads (e.g. parking areas). Depending on
the type of road, the required response for a conflict is different.</p>
</li>
<li>
<p>Objects are classified into <em>Vulnerable Road Users</em> (e.g. pedestrians) and
other (dynamic) traffic objects. The reason for this separation is that the
first object group requires special safety considerations, as for example
pedestrians may have unknown routes, compared to vehicles.</p>
</li>
<li>
<p>RSS is not about:</p>
<div class="ulist">
<ul>
<li>
<p>How to get "good enough" sensor data. It is about the usage, which may impose
some sensor requirements.</p>
</li>
<li>
<p>Avoiding collisions, if other traffic participants show a completely erratic
driving behavior. Instead, it is about ensuring that the ego vehicle cannot
be blamed for the accident.</p>
</li>
</ul>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="_purpose_and_scope_of_this_library">1.2. Purpose and Scope of this Library</h3>
<div class="paragraph">
<p>The design of the library at hand is based on the academic paper
<em>"On a Formal Model of Safe and Scalable Self-driving Cars"</em>.
The library provides a C++ implementation of RSS according to the aforementioned
summary. The key component of this implementation is called <em>"ad-rss-lib"</em>.
This library receives (post-processed) sensor information and provides actuator
command restrictions as output.</p>
</div>
<div id="Figure:Library" class="imageblock">
<div class="content">
<img src="./images/ad-rss-lib-Integrate_Into_Sense-Plan-Act.png" alt="ad rss lib Integrate Into Sense Plan Act">
</div>
<div class="title">Figure 1. ad-rss-lib (implemented in the library) and its interfaces to the outside world</div>
</div>
<div class="paragraph">
<p>In summary, the ad-rss-lib receives an object list, with information about all
objects in the surrounding environment of the ego vehicle. Then, the ad-rss-lib
creates an object - ego vehicle pair, for each object. This pair is usually
referred to as <em>"Situation"</em>. For all situations, the aforementioned RSS checks
are performed and a proper response is calculated. Finally, one overall
response is computed by the ad-rss-lib, and the corresponding actuator command
restrictions (i.e. lateral and longitudinal acceleration restrictions) are sent
out (see <a href="#Figure:Library">ad-rss-lib (implemented in the library) and its interfaces to the outside world</a>).</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>The conversion from sensor data to the object list required by the ad-rss-lib,
as well as the conversion of the actuator command restrictions to real driving
commands, have to be implemented by the user of this library, as these parts
heavily depend on the actual vehicle setup.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>The current scope of the provided implementation is:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Standalone C++-library containing the implementation of the ad-rss-lib</p>
</li>
<li>
<p>The ad-rss-lib covers multi-lane roads and intersections</p>
</li>
<li>
<p>Code quality is assured by automated testing with test coverage of
100% on methods and 80% on branches as well as static code analysis</p>
</li>
</ul>
</div>
</td>
</tr>
</table>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="paragraph">
<p>The initial design does not yet cover:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Compensating for improper behavior of others</p>
</li>
<li>
<p>Lateral conflicts in case of intersections</p>
</li>
<li>
<p>Respecting occlusions</p>
</li>
<li>
<p>Checks with Vulnerable Road Users</p>
</li>
<li>
<p>Checks for unstructured roads, e.g. parking spaces</p>
</li>
</ul>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_overview_of_the_document">1.3. Overview of the Document</h3>
<div class="paragraph">
<p>The remainder of this document is structured as follows:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#Section::HLD::Implementation">ad-rss-lib Realization</a> provides an overview of the RSS
implementation provided within the library. It discusses how each situation
is handled.</p>
</li>
<li>
<p><a href="#Section::HLD::SystemArchitecture">RSS System Architecture Overview</a> introduces the system
architecture for RSS and the interfaces of the ad-rss-lib to other components.</p>
</li>
<li>
<p><a href="#Section::HLD::SoftwareArchitecture">ad-rss-lib: Software Architecture</a> provides a description of the
software architecture, included the interface and data type definitions. If
you would like to integrate the library into your system, this section, as
well as <a href="#Section::HLD::SystemArchitecture">RSS System Architecture Overview</a> are of particular
importance.</p>
</li>
<li>
<p><a href="#Section::HLD::Security">Design for Security</a> provides some notes on security design aspects</p>
</li>
<li>
<p><a href="#Section::HLD::Safety">Design for Safety</a> provides some notes on safety design aspects</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<h1 id="_high_level_design" class="sect0">High Level Design</h1>
<div class="sect1">
<h2 id="Section::HLD::Implementation">2. ad-rss-lib Realization</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_rss_checks_and_response">2.1. RSS checks and response</h3>
<div class="paragraph">
<p>To check whether the ego vehicle is in a safe state, all the objects in the
surrounding must be respected. To do so the ad-rss-lib will perform an analysis
against all the objects in the environment individually. Meaning, for each
object in the environment the ad-rss-lib will check whether the ego vehicle
conflicts with this object. Therefore, longitudinal and lateral checks are
performed. As mentioned earlier, these checks are performed separately for each
object - ego vehicle pair, i.e. for each situation.</p>
</div>
<div class="paragraph">
<p>At this, the type of situation has to be evaluated upfront outside
of this library implementation. Otherwise, this RSS implementation
would enforce a concrete representation of the environment and i.e.
the map data with lanes, intersections and priority rules.
The situations types that have to be identified are:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>both vehicles drive on the same road</p>
<div class="ulist">
<ul>
<li>
<p>in the same direction</p>
</li>
<li>
<p>in opposite direction</p>
</li>
</ul>
</div>
</li>
<li>
<p>both vehicles drive on different roads that are connected by an intersection</p>
<div class="ulist">
<ul>
<li>
<p>the ego vehicle has priority over the other vehicle</p>
</li>
<li>
<p>the other vehicle has priority over the ego vehicle</p>
</li>
<li>
<p>both vehicles have same priority (no vehicle has priority over
the other vehicle)</p>
</li>
</ul>
</div>
</li>
</ol>
</div>
<div class="sect3">
<h4 id="_longitudinal_conflicts">2.1.1. Longitudinal conflicts</h4>
<div class="paragraph">
<p>The behavior for longitudinal conflicts (checks and response) for vehicles
driving in the same direction are implemented as described in the definitions 1,
3 and 4 of paper 1 (see <a href="#Table::References">References</a>). For the case of vehicles driving
in opposite directions, the implementation follows the definitions 2, 3 and 4 of
the paper.</p>
</div>
<div class="paragraph">
<p>In detail, the current realization looks as follows:</p>
</div>
<div class="sect4">
<h5 id="_same_direction">2.1.1.1. Same direction</h5>
<div class="paragraph">
<p>If the longitudinal distance is not safe and</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>if the ego vehicle is in front, the other vehicle
has to break longitudinally. There is
no longitudinal response for the ego vehicle issued.</p>
</li>
<li>
<p>otherwise, the ego vehicle has to break longitudinally with at
least <em>&#945;<sub>min,brake</sub></em>.</p>
</li>
</ol>
</div>
</div>
<div class="sect4">
<h5 id="_opposite_direction">2.1.1.2. Opposite direction</h5>
<div class="paragraph">
<p>If the longitudinal distance is not safe and</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>if the ego vehicle is driving in the correct direction,
the ego vehicle has to break longitudinally with at
least <em>&#945;<sub>min,brake,correct</sub></em>.</p>
</li>
<li>
<p>otherwise, the ego vehicle has to break longitudinally with at
least <em>&#945;<sub>min,brake</sub></em>.</p>
</li>
</ol>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_lateral_conflicts">2.1.2. Lateral conflicts</h4>
<div class="paragraph">
<p>The lateral checks and the proper response follow the definitions 5, 6, 7 and 8
of paper 1 (see <a href="#Table::References">References</a>).</p>
</div>
<div class="paragraph">
<p>In detail, the current realization looks as follows:
If the lateral distance is not safe and</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>if the ego vehicle is on the left side, the ego vehicle has to break
laterally with at least <em>&#945;<sup>lat</sup><sub>brake,min</sub></em> on the right side</p>
</li>
<li>
<p>if the ego vehicle is on the right side, the ego vehicle has to break
laterally with at least <em>&#945;<sup>lat</sup><sub>brake,min</sub></em> on the left side</p>
</li>
<li>
<p>otherwise, the ego vehicle has to break
laterally with at least <em>&#945;<sup>lat</sup><sub>brake,min</sub></em> on both sides</p>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="_combining_longitudinal_and_lateral_response">2.1.3. Combining longitudinal and lateral response</h4>
<div class="paragraph">
<p>The combination of longitudinal and lateral response of a single situation
(object - ego vehicle pair) is implemented as described in definitions
9 and 10 of paper 1 (see <a href="#Table::References">References</a>).</p>
</div>
<div class="paragraph">
<p>In detail, the current realization looks as follows:</p>
</div>
<div class="paragraph">
<p>If the situation is dangerous (i.e. there exists
a longitudinal and a lateral conflict), the stored
last non-dangerous state of the of the same situation (ego-vehicle - object pair)
is checked:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>if there was no lateral conflict, the combined response breaks laterally</p>
</li>
<li>
<p>if there was no longitudinal conflict, the combined response breaks longitudinally</p>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="_combining_all_situations_of_a_given_point_in_time">2.1.4. Combining all situations of a given point in time</h4>
<div class="paragraph">
<p>Since this RSS implementation performs the above mentioned check separately for
each situation, the overall response of the ego vehicle has to consider
all individual situations of the current scene.</p>
</div>
<div class="paragraph">
<p>The current realization loops over all situations and combines the lateral left,
the lateral right and the longitudinal response states of these by selecting
the most severe response of each component respectively.</p>
</div>
</div>
<div class="sect3">
<h4 id="Section::HLD::Implementation::EvasiveManeuvers">2.1.5. Evasive maneuvers</h4>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="paragraph">
<p>This initial implementation does not yet cover evasive maneuvers to compensate
for improper behavior of others according to definitions 11, 12 and 13
of the paper 1.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>If the car finds itself in a dangerous situation one possible action is always
to brake. This should always result in a safe state, if both vehicles respond
properly according to RSS. Improper behavior of others might still lead to an
accident. This is where evasive maneuver could prevent from this.
To do so, it must be assured that this lateral movement brings the vehicle
into a safe state and does not conflict with another vehicle.
In order to determine whether a lateral movement solves the conflict a
prediction of the state would be necessary.</p>
</div>
<div class="paragraph">
<p>Such a naive predication following definition 11 of the paper is not
available yet in this initial implementation. In addition, the ad-rss-lib
currently has no notion of drivable freespace area.
Hence, it cannot determine that an evasive maneuver initiated by RSS will cause
an accident with an obstacle or forces the vehicle to leave the road.</p>
</div>
<div class="paragraph">
<p>Therefore, it is impossible for the ad-rss-lib in its current form to detect
whether a lateral evasion is really feasible. Hence, <em>the ad-rss-lib will not
initiate a lateral evasive maneuver</em> according to definitions 12 and 13
of the paper. Instead, it will only restrict the movement in the
dangerous direction.</p>
</div>
<div class="paragraph">
<p>Please note that this restriction does not hinder the driving policy to find a
better escape for the current situation. If this is the case, for example by
braking harder, or changing lanes quicker, RSS will not forbid this maneuver,
as long as it does not create another conflict, and is compliant with the
restrictions calculated by RSS.</p>
</div>
</div>
<div class="sect3">
<h4 id="_handling_of_intersections">2.1.6. Handling of Intersections</h4>
<div class="paragraph">
<p>The behavior for intersection conflicts (checks and response) for vehicles is
implemented as described in the definitions 16, 17 and 18 of paper 1 (see
<a href="#Table::References">References</a>).</p>
</div>
<div class="paragraph">
<p>In detail, the current realization looks as follows:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>It is checked, if a non-prioritized vehicle <em>was</em> able to stop in front of
the intersection. If this is the case, the non-prioritized vehicle is
supposed to brake, whereas the prioritized vehicle can continue driving as
before.</p>
</li>
<li>
<p>If 1. does not hold, it is checked, if there is a safe longitudinal distance
between the two vehicles according to Definition 17.2 of paper 1. In this
case, the leading vehicle can continue driving, whereas the following
vehicle has to respect the "stated braking pattern".</p>
</li>
<li>
<p>If 1. and 2. do not hold, there is a time period in which both vehicles may
be crossing the intersection. In this case Definition 18.3 of paper 1
applies, i.e. both cars have to brake laterally and longitudinally with at
least <em>&#945;<sub>min,brake</sub></em>.</p>
</li>
</ol>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Case 1. is the direct realization of Definition 17.1, where it is mentioned that
the vehicle <em>was</em> able to stop safely. However, as a consequence, the
prioritized vehicle is not forced to brake, if the non-prioritized vehicle does
not respect RSS. Since the evasive maneuvers are not yet implemented
<a href="#Section::HLD::Implementation::EvasiveManeuvers">Evasive maneuvers</a>,
such kind of improper behavior cannot be handled by the current ad-rss-lib.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="paragraph">
<p>In the current realization of the ad-rss-lib, it is assumed that there is always
a lateral conflict in case of intersections. This will be addressed in future.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_response_time_and_other_parameters">2.1.7. Response Time and Other Parameters</h4>
<div class="paragraph">
<p>According to the papers each traffic participant has a response time, and is
objected to respect certain acceleration limits (e.g. maximum acceleration
<em>&#945;<sub>accel,max</sub></em>, maximum deceleration <em>&#945;<sub>brake,max</sub></em>, etc.). Within
this response time the participants (including the ego vehicle) are allowed to
accelerate with at most <em>&#945;<sub>accel,max</sub></em>, and thus increase their velocity.
The distance covered during the response time is part of the safe distance, as
defined by RSS. Hence, upon entering a dangerous situation, it would be
possible to accelerate with up to <em>&#945;<sub>accel,max</sub></em> for at most t &lt; response
time, as this acceleration is already considered.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>It is important to note that the implementation of the ad-rss-lib in the
library only uses parameters, but not the exact value. By this means, the
library is independent to changes of the parameter values. Instead, the user
defines a feasible parameter set, which is provided as input to the ad-rss-lib.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>A discussion on the parameter selection can be found in
<a href="#Section::ParameterDiscussion">Parameter Discussion</a>.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="Section::SituationBasedCS">2.2. Situation-Based Coordinate System</h3>
<div class="paragraph">
<p>As described in paper 1 section 3.2 "Preliminaries — A Lane-Based Coordinate
System"(see <a href="#Table::References">References</a>), all RSS calculations are
based on a lane-centric coordinate system. This system uses adjacent, straight
lanes of constant width, and thus requires a transformation of the object
states from Cartesian into the lane space. This transformation into a
lane-based coordinate system is described by a bijective function, as pointed
out by paper 1. Therein, the lateral position of a vehicle within the lane is
mapped to a parametric interval [<em>-0.5; 0.5</em>], where the lane boundaries are
fixed at the borders of the interval. The advantage of such a coordinate system
over the Cartesian system is that it allows the direct calculation of
longitudinal and lateral distances of objects.</p>
</div>
<div class="paragraph">
<p>However, when transforming the Cartesian space into a lane-based coordinate
system, several challenges have to be taken into consideration.</p>
</div>
<div class="sect3">
<h4 id="Section::SituationBasedCS::comparing_velocities">2.2.1. Comparing movements in lane-based coordinate systems</h4>
<div class="paragraph">
<p>During the transformation process to a lane-based coordinate system, not only
the position but also the the velocities and accelerations have to be
transformed. As a matter of fact, the resulting values depend on the actual
lane geometry, and thus, velocities and accelerations of different lane-based
coordinate systems cannot be compared to each other anymore (ego vehicle - object pair). To illustrate this
problems, let us consider the following examples:</p>
</div>
<div class="sect4">
<h5 id="Section::SituationBasedCS::discontinuity_problem">2.2.1.1. Discontinuity Problem: Two parallel lanes, different width</h5>
<div id="Figure:LanesWithDifferentWidth" class="imageblock">
<div class="content">
<img src="./images/lanes_with_different_width.svg" alt="lanes with different width">
</div>
<div class="title">Figure 2. Two parallel lanes with different width causing a discontinuity in lateral acceleration</div>
</div>
<div class="paragraph">
<p>Let us illustrate this on a simple example with two parallel lanes of different
width. Let the left lane A have a constant width of <em>4 m</em> where the right lane
B only has a constant width of <em>2 m</em>. If both lanes define their own lane-based
coordinate system <em>LCS<sub>A</sub></em> and <em>LCS<sub>B</sub></em>, a Cartesian lateral acceleration value
of <em>1 m/s<sup>2</sup></em> becomes <em>0.25 lat/s<sup>2</sup></em> in <em>LCS<sub>A</sub></em> and <em>0.5 lat/s<sup>2</sup></em> in
<em>LCS<sub>B</sub></em>. Therefore, the formula for constant accelerated movement has to use
different acceleration constants in different lanes. This situation is getting
even worse, if a car is changing the lane from lane A to lane B: then the
closed formula for constant accelerated movement to calculate the lateral
distance over time cannot be applied anymore directly.</p>
</div>
</div>
<div class="sect4">
<h5 id="Section::SituationBasedCS::changing_acceleration_problem">2.2.1.2. Changing Acceleration Problem: Lane is widening/narrowing</h5>
<div id="Figure:LaneWidthNarrowing" class="imageblock">
<div class="content">
<img src="./images/lane_width_narrowing.svg" alt="lane width narrowing">
</div>
<div class="title">Figure 3. Changing lane width and its impact on the lateral acceleration</div>
</div>
<div class="paragraph">
<p>Let us consider a lane with changing width in another example. If the lane&#8217;s
width at the beginning is <em>4 m</em> and <em>100 m</em> away the lane is narrowing to <em>2 m</em>.
In such a case the Cartesian lateral acceleration value of <em>1 m/s<sup>2</sup></em> is
changing from <em>0.25 lat/s<sup>2</sup></em> at the beginning towards <em>0.5 lat/s<sup>2</sup></em> while
advancing within the lane.</p>
</div>
</div>
<div class="sect4">
<h5 id="Section::SituationBasedCS::changing_distances_problem">2.2.1.3. Changing Distances Problem: Lane with a narrow curve</h5>
<div id="Figure:LaneConstantCurve" class="imageblock">
<div class="content">
<img src="./images/lane_constant_curve.svg" alt="lane constant curve">
</div>
<div class="title">Figure 4. Lane describing a narrow 180° curve and its impact on driven distances</div>
</div>
<div class="paragraph">
<p>This section illustrates a longitudinal situation similar to the lane widening
example. Let us assume the lane has a constant width of <em>4 m</em> describing a
curve with inner radius of <em>50 m</em> covering <em>180°</em>. The inner border of the lane
has a length of about <em>157.1 m</em>, the center line <em>163.4 m</em> the outer border
<em>169.7 m</em>. In that situation a longitudinal acceleration value will evaluate
to <em>1.0 lon/s<sup>2</sup></em> for the center line, <em>0.96 lon/s<sup>2</sup></em> for the outer border and
<em>1.04 lon/s<sup>2</sup></em> for the inner border. Therefore, the longitudinal acceleration
changes over time, if the vehicle changes its lateral position within the lane.</p>
</div>
</div>
<div class="sect4">
<h5 id="_summary">2.2.1.4. Summary</h5>
<div class="paragraph">
<p>As sketched in the previous sections both the longitudinal as well as the
lateral acceleration values, as well as velocities within the lane-based
coordinate system cannot be considered as constant anymore. Moreover, these
values do not only change within one coordinate system, but also when changing
from one lane-based system to another one. To overcome this issue, we use a
<em>"Situation-Based Coordinate System"</em>, that is described in detail in the next
section. This system is unique for each situation (ego vehicle - object pair)
and comprises <em>all</em> lanes required to describe this situation.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="Section::SituationBasedCS::ChosenDesign">2.2.2. Chosen Design: Individual Situation-Based Coordinate System</h4>
<div class="paragraph">
<p>As RSS performs a worst case assessment, the idea followed by the ad-rss-lib
implementation is to calculate the min/max position values of the vehicles
within the situation specific coordinate system. According to the constellation of the
vehicles within the situation, the respective worst case lateral and longitudinal
border values are selected and processed by the RSS formulas.
Like this, it is assured that the calculations are sound, nevertheless this
might lead to a more cautious behavior of the vehicle.
The following subsections describe the selected approach in more detail.</p>
</div>
<div class="sect4">
<h5 id="_two_parallel_lanes_different_width">2.2.2.1. Two parallel lanes, different width</h5>
<div class="paragraph">
<p>As described in <a href="#Section::SituationBasedCS::comparing_velocities">Comparing movements in lane-based coordinate systems</a>, the border between neighboring lanes
of different width introduces discontinuities of the lateral acceleration values
(see <a href="#Figure:LanesWithDifferentWidth">Two parallel lanes with different width causing a discontinuity in lateral acceleration</a>).</p>
</div>
<div class="paragraph">
<p>As the ad-rss-lib judges the relative situation between the ego vehicle
and the other objects one by one individually, it is not required to distinguish
between the actual lanes within the individual distance calculations.
Combining all lanes relevant for the individual situation <em>s<sub>i</sub></em>
between ego vehicle and object <em>o<sub>i</sub></em> into one single situation-based
coordinate system <em>SCS<sub>i</sub></em> resolves all discontinuities, as depicted in <a href="#Figure:LanesWithDifferentWidthSameCS">Avoid discontinuities by using one single situation-based coordinate system</a></p>
</div>
<div id="Figure:LanesWithDifferentWidthSameCS" class="imageblock">
<div class="content">
<img src="./images/lanes_with_different_width_same_cs.svg" alt="lanes with different width same cs">
</div>
<div class="title">Figure 5. Avoid discontinuities by using one single situation-based coordinate system</div>
</div>
<div class="paragraph">
<p>Coming back to the concrete example from <a href="#Figure:LanesWithDifferentWidth">Two parallel lanes with different width causing a discontinuity in lateral acceleration</a>,
left lane A having a constant width of <em>4 m</em> and right lane B having a constant
width of <em>2 m</em>, both lanes together have a resulting width of <em>6 m</em> and form
an area with continuous lateral acceleration (see also
illustration in <a href="#Figure:LanesWithDifferentWidthSameCS">Avoid discontinuities by using one single situation-based coordinate system</a>).</p>
</div>
<div class="paragraph">
<p>The check of the ego vehicle with another object <em>o<sub>j</sub></em> which is two lanes at the
right of the ego vehicle in a lane C having a constant width of <em>3 m</em>, has to
take all three lanes into account with resulting width of <em>9 m</em>. Therefore, a
different situation-based coordinate system <em>SCS<sub>j</sub></em> is required, when checking
another object.</p>
</div>
</div>
<div class="sect4">
<h5 id="_lane_is_widening_or_has_a_narrow_curve">2.2.2.2. Lane is widening or has a narrow curve</h5>
<div class="paragraph">
<p>The individual situation specific coordinate system <em>SCS</em> does not yet cover
the situations of widening lanes or narrow curves. To take the variation of the
lane width and length into account, it is required to apply the extrema
within the respective <em>SCS</em> accordingly.</p>
</div>
<div class="paragraph">
<p>Again, coming back to the examples from above, let us have a lane with non
constant width between <em>2 m</em> and <em>4 m</em>. Then the transformation of the maximal
possible lateral position value of the vehicle into the situation coordinate system
<em>SCS</em> has to take the maximum width of <em>4 m</em> into account,
while the transformation of the minimal possible lateral position has to
be transformed with the minimum width of the lane of <em>2 m</em>.
Like this it is guaranteed that we don&#8217;t underestimate the distances of the vehicles
towards each other. As a result, it is ensured that under all conditions, the safety
distances are calculated in a conservative manner.</p>
</div>
<div class="paragraph">
<p>In a similar way, it is possible to transform the longitudinal position
values into the situation-based coordinate system <em>SCS<sub>k</sub></em>.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>The performed operations can be interpreted as enlarging the vehicles bounding
boxes to ensure the worst case is covered.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect4">
<h5 id="_road_area">2.2.2.3. Road area</h5>
<div class="paragraph">
<p>To overcome the problems of discontinuities, changing lateral and
longitudinal distances resulting in not comparable velocities and accelerations
the situation based coordinate system merges in a first step all lanes segments
relevant to the situation (ego vehicle - object pair) into one situation
specific metric road area. One can imagine this step as the creation
of a bounding box around the two vehicles
that is large enough to cover the relevant positions of those
while ignoring actual markings on the road between the lanes.
By this, especially the physical lateral velocities and accelerations within the
Cartesian 2D space of the road area can be measured and calculated straight
forward without any discontinuities (see also the illustrations in
<a href="#Figure:SituationBasedCS:Creation:RoadArea">Creation of the situation-based coordinate system: The road area (red) consists of all lane segments along the road relevant for the situation between the two vehicles</a> and
<a href="#Figure:SituationBasedCS:Creation:VehicleBoundingBox">Creation of the situation-based coordinate system: Worst-case transformation of the vehicle bounding box. The metric road on the left leads to transformed vehicles and their bounding boxes (red) on the right, sketched for a narrowing road area at the top and a curve at the bottom.</a> below).</p>
</div>
<div id="Figure:SituationBasedCS:Creation:RoadArea" class="imageblock">
<div class="content">
<img src="./images/rss_situation_based_coordinate_system_creation_road_area.svg" alt="rss situation based coordinate system creation road area">
</div>
<div class="title">Figure 6. Creation of the situation-based coordinate system: The road area (red) consists of all lane segments along the road relevant for the situation between the two vehicles</div>
</div>
<div id="Figure:SituationBasedCS:Creation:VehicleBoundingBox" class="imageblock">
<div class="content">
<img src="./images/rss_situation_based_coordinate_system_creation_vehicle_bounding_box.svg" alt="rss situation based coordinate system creation vehicle bounding box">
</div>
<div class="title">Figure 7. Creation of the situation-based coordinate system: Worst-case transformation of the vehicle bounding box. The metric road on the left leads to transformed vehicles and their bounding boxes (red) on the right, sketched for a narrowing road area at the top and a curve at the bottom.</div>
</div>
<div class="paragraph">
<p>It is worth to mention, that in these calculations the actual
shape of the lane is not used. Therefore,
detailed knowledge of the actual lane geometry is not
required. The absolute maximum and minimum width and length values of the lane
segments is sufficient to calculate a proper transformation into the space of
the situation specific coordinate systems.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>In case of intersections both vehicles define their own road areas including the
intersecting parts. The case that a lane is ending or two lanes are
merged into one single lane have to be treated like intersections since
a lateral conflict is unavoidable.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect4">
<h5 id="_considerations_on_reverse_transformation_of_the_proper_response">2.2.2.4. Considerations on reverse transformation of the proper response</h5>
<div class="paragraph">
<p>As the proper response is referring to the situation-based coordinate
systems, the response has to be transformed back considering the actual
lane geometry. Therefore, first the transformation into the
vehicle-specific lane-based coordinate system is required,
and then the transformation into the Cartesian space is performed.</p>
</div>
<div class="paragraph">
<p>A simple example illustrates this: a vehicle driving in a curve will for sure
have to perform a lateral acceleration in Cartesian space otherwise it will
leave the lane because of the centripetal force, as illustrated in
<a href="#Figure:LaneConstantCurveResponseTransform">Constant drive around a curve will result in a zero lateral acceleration in a lane-based coordinate system and in a non-zero acceleration in a cartesian system</a>. However, in the vehicle specific
lane-based system the lateral acceleration will be 0.</p>
</div>
<div id="Figure:LaneConstantCurveResponseTransform" class="imageblock">
<div class="content">
<img src="./images/lane_constant_curve_response_transform.svg" alt="lane constant curve response transform">
</div>
<div class="title">Figure 8. Constant drive around a curve will result in a zero lateral acceleration in a lane-based coordinate system and in a non-zero acceleration in a cartesian system</div>
</div>
<div class="paragraph">
<p>Because the proper response of RSS is defined with respect to the actual lane
the vehicle is driving in, it is required to assure that the reverse
transformation of the proper response considers only the ego-lane and not the
complete situation specific coordinate systems. For example, let us consider a
scenario as depicted in <a href="#Figure:LaneWidthNarrowingResponseTransform">Different lateral accelerations in a lane-based system and Cartesian system for a vehicle following the centerline of lane B</a>,
where one widening lane A and one narrowing lane B are neighbors in such a way
that the overall width of the road is constantly <em>6 m</em>. Lane A starts with <em>2 m</em>
and ends with <em>4 m</em> width, whereas lane B starts with <em>4 m</em> and ends with <em>2 m</em>
width. A lateral velocity of 0 in respect to the whole road differs from the
definition of a lateral velocity of 0 in lane A/lane B in Cartesian space.</p>
</div>
<div id="Figure:LaneWidthNarrowingResponseTransform" class="imageblock">
<div class="content">
<img src="./images/lane_width_narrowing_response_transform.svg" alt="lane width narrowing response transform">
</div>
<div class="title">Figure 9. Different lateral accelerations in a lane-based system and Cartesian system for a vehicle following the centerline of lane B</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>It is worth to note that in the particular implementation of the ad-rss-lib in
the library at hand, the reverse transformation from the situation-specific
into a vehicle-centric lane coordinate system is not required, as the RSS
response is defined such that it is independent of these two coordinate system.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect4">
<h5 id="_summary_2">2.2.2.5. Summary</h5>
<div class="paragraph">
<p>The presented construction of a continuous situation-based coordinates system
will allow the pairwise calculation of the safe distances between ego vehicle
and objects with the assumption of constant acceleration. Still, the worst case
assessment of RSS is not violated. This situation-based coordinate system in
conjunction with the situation specific consideration of the position extrema
allows the calculation of the safe distances, the decision on
dangerous situations and deduction of a proper response.</p>
</div>
<div class="paragraph">
<p>The main benefits of the selected Situation Based Coordinate System definition are:
*	Velocity and acceleration values in longitudinal and lateral lane directions
  do not change when transforming into the situation based coordinate system
*	All formulas for constant accelerated movement can be applied in the
  situation based coordinate space.
* Distance calculations in situation based coordinate systems are
  simple additions or subtractions
* The transformation into the situation based coordinate system is simple and
  therefore can be implemented easily with the restricted computational
  resources of safety controllers</p>
</div>
<div class="paragraph">
<p>For safety considerations, it is crucial to do all calculations considering the
worst case assumption. Therefore, it is required to choose the correct
minimum or maximum value of the positions in the situation-based coordinate
system to assure that always the worst case is considered.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_design_alternative_iterative_approach_optional">2.2.3. Design alternative: Iterative Approach [optional]</h4>
<div id="Figure:LanesWithDifferentWidthIterative" class="imageblock">
<div class="content">
<img src="./images/lanes_with_different_width_iterative.svg" alt="lanes with different width iterative">
</div>
<div class="title">Figure 10. Illustration of an iterative approach to calculate non-constant acceleration, velocity etc.</div>
</div>
<div class="paragraph">
<p>Another possible way to handle the non-constant acceleration values would be an
iterative approach: based on the position, the velocity and the acceleration
values at the given position at time <em>t<sub>0</sub></em>, the position at time <em>t<sub>1</sub></em> is
calculated. The smaller the time interval between the iteration steps is
chosen, the smaller the calculation error gets (see
  <a href="#Figure:LanesWithDifferentWidthIterative">Illustration of an iterative approach to calculate non-constant acceleration, velocity etc.</a>).</p>
</div>
<div class="paragraph">
<p>One drawback of the iterative approach is that the RSS implementation has to get
to know the lane geometries in detail to be able to calculate the acceleration
values to be used for every position within the situation-based coordinate
systems. Therefore, this design approach is not selected by this ad-rss-lib
implementation.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_summary_3">2.3. Summary</h3>
<div class="sect3">
<h4 id="_key_decisions">2.3.1. Key decisions</h4>
<div class="ulist">
<ul>
<li>
<p>RSS checks are performed on the current state on a ego vehicle - object pair
basis</p>
</li>
<li>
<p>In dangerous situations only braking maneuvers are issued. RSS does not
initiate evasive maneuvers, but will not hinder the driving policy
to execute lateral evasive maneuvers, as long as these are compliant with
the required RSS response.</p>
</li>
<li>
<p>To handle changing lateral/longitudinal lane geometries when
transforming the Cartesian space into the situation based coordinate system,
the vehicles position extrema are chosen in such a way that accelerations
can still be treated as constant, but guarantee safe operation (see
<a href="#Section::SituationBasedCS::ChosenDesign">Chosen Design: Individual Situation-Based Coordinate System</a>).</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="Section::HLD::SystemArchitecture">3. RSS System Architecture Overview</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This section sketches the integration of RSS into a exisiting system architecture.</p>
</div>
<div id="Figure:ADS" class="imageblock">
<div class="content">
<img src="./images/img/d704ce30-6e93-4180-aaf8-fce2a4896ffa_url_f36d61c4-efc7-4689-9709-83836e6b3bf7.tmp" alt="d704ce30 6e93 4180 aaf8 fce2a4896ffa url f36d61c4 efc7 4689 9709 83836e6b3bf7">
</div>
<div class="title">Figure 11. A generic system architecture for an ADS.</div>
</div>
<div class="paragraph">
<p>From high level view the architecture of an ADS consists of three main parts: Sense, Plan, Act. The world model data
provided by the Sense part is used by the Plan part to create the near term actuator control commands executed by the
Act part.</p>
</div>
<div id="Figure:ADS_RSS" class="imageblock">
<div class="content">
<img src="./images/img/d377baa5-5706-4fff-b333-30b97928603c_url_a9dc98d2-f3ea-4090-80e8-78c967b325dd.tmp" alt="d377baa5 5706 4fff b333 30b97928603c url a9dc98d2 f3ea 4090 80e8 78c967b325dd">
</div>
<div class="title">Figure 12. Integration of RSS into a system architecture</div>
</div>
<div class="paragraph">
<p>RSS is integrated into such an ADS architecture by placing it in parallel to the Plan. To provide a safety envelope
around the planning output the integration of RSS into a ADS architecture spans into the Sense part to provide the
required RSS world model data as well as into the Act part to limit the actuator control commands to the RSS
restrictions.</p>
</div>
<div class="sect2">
<h3 id="_sense">3.1. Sense</h3>
<div class="paragraph">
<p>The Sense part gathers information on the environment required to fulfill the ADS task. In general there exist several
level of perception and fusion which enrich the world model to the extend required for the planning algorithms. In this
high-level architecture overview the Sense part takes over this task.</p>
</div>
<div class="sect3">
<h4 id="_sensorsubsystem">3.1.1. SensorSubsystem</h4>
<div class="paragraph">
<p>The SensorSubsystem realizes the Sense part functionality. It is responsible for the perception of the environment. It
interfaces to the real world by receiving, processing and fusing sensor information. It provides all information in form
of the world model to the other ADS subsystems. The exact content of the world model data is highly dependent on the
concrete realization of the receiving subsystems, especially the degree of perception and fusion applied will differ.
The provided world model data might include raw sensor data, high level object data, but also a-priori knowledge such as
AD map data. To account for this the SensorSubsystem provides separate output ports for every connected subsystem.</p>
</div>
<div class="sect4">
<h5 id="_output_ports">3.1.1.1. Output Ports</h5>
<div class="paragraph">
<p>planWorldModelData: The world model data required by the PlanningSubsystem</p>
</div>
<div class="paragraph">
<p>rssWorldModelData: The world model data required by the RssSubsystem.</p>
</div>
<div id="Figure:SensorSubsystem" class="imageblock">
<div class="content">
<img src="./images/img/a249fd7e-230d-4389-9f64-bb617cc2bc6d_url_4b12944b-4771-4523-947b-b5ef8221dfe2.tmp" alt="a249fd7e 230d 4389 9f64 bb617cc2bc6d url 4b12944b 4771 4523 947b b5ef8221dfe2">
</div>
<div class="title">Figure 13. Extending the Sense part with world model data required by RSS.</div>
</div>
</div>
<div class="sect4">
<h5 id="_sense_2">3.1.1.2. Sense</h5>
<div class="paragraph">
<p>The Sense entity is responsible to create the world model data required by the PlanningSubsystem. This contains the ADS
Planning specific implementation of the Sense part which already exists.</p>
</div>
<div class="sect5">
<h6 id="_output_ports_2">3.1.1.2.1. Output Ports</h6>
<div class="paragraph">
<p>planWorldModelData: The world model data required by the PlanningSubsystem</p>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_rssworldmodeling">3.1.1.3. RssWorldModeling</h5>
<div class="paragraph">
<p>The RssWorldModeling entity is responsible to create the world model data required by the RssSubsystem. The user has to
implement this functionality as part of the RSS integration efforts into the ADS system. The RssWorldModelData has to be
filled with meaningful and reliable data.</p>
</div>
<div class="sect5">
<h6 id="_output_ports_3">3.1.1.3.1. Output Ports</h6>
<div class="paragraph">
<p>rssWorldModelData: The world model data required by the RssSubsystem.</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_plan">3.2. Plan</h3>
<div class="paragraph">
<p>The Plan part processes the information on the environment to create the internal world model required to plan the next
moves of the ADS.</p>
</div>
<div class="sect3">
<h4 id="_planningsubsystem">3.2.1. PlanningSubsystem</h4>
<div class="paragraph">
<p>The PlanningSubsystem realizes the Plan part functionality. It performs the decision-making of the ADS. It analyses the
provided PlanWorldModelData and decides what action to take. Finally, this leads to concrete control commands for the
ADS ActuatorSubsystem defining the next move of the ADS.</p>
</div>
<div class="sect4">
<h5 id="_input_ports">3.2.1.1. Input Ports</h5>
<div class="paragraph">
<p>planWorldModelData: The world model data required to perform the planning task</p>
</div>
</div>
<div class="sect4">
<h5 id="_output_ports_4">3.2.1.2. Output Ports</h5>
<div class="paragraph">
<p>actuatorControlCommand: The control commands to realize the next moves within the current plan.</p>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_act">3.3. Act</h3>
<div class="paragraph">
<p>The Act part executes the moves which the Plan part has calculated.</p>
</div>
<div class="sect3">
<h4 id="_actuatorsubsystem">3.3.1. ActuatorSubsystem</h4>
<div class="paragraph">
<p>The ActuatorSubsystem realizes the Act part functionality. It receives the ActuatorControlCommands controlling i.e.
acceleration, braking and steering to execute the plan.</p>
</div>
<div class="sect4">
<h5 id="_input_ports_2">3.3.1.1. Input Ports</h5>
<div class="paragraph">
<p>actuatorControlCommand: The control commands from the PlanningSubsystem to control the vehicle actuator system.</p>
</div>
<div class="paragraph">
<p>rssAccelerationRestrictions: The restrictions on the acceleration for the vehicle calculated by RSS.</p>
</div>
<div id="Figure:ActuatorSubsystem" class="imageblock">
<div class="content">
<img src="./images/img/5c730771-64c0-4a89-bfe5-e478a33333aa_url_1ebb18d9-24d8-4a60-9320-d716f465eee2.tmp" alt="5c730771 64c0 4a89 bfe5 e478a33333aa url 1ebb18d9 24d8 4a60 9320 d716f465eee2">
</div>
<div class="title">Figure 14. Extending the Act part by RSS command limitation.</div>
</div>
</div>
<div class="sect4">
<h5 id="_rssactuatorcommandlimitation">3.3.1.2. RssActuatorCommandLimitation</h5>
<div class="paragraph">
<p>The RssActuatorCommandLimitation entity receives the actuator control commands from the PlanningSubsystem and restricts
the control values according to the restrictions calculated by RSS. The resulting actuator control commands are safe in
respect to RSS rules. This calculation heavily depends on the actual representation of the ActuatorControlCommands data.
Therefore, a generic implementation is not possible. Therefore, the user has to implement this functionality as part of
the RSS integration efforts into the ADS system.</p>
</div>
<div class="sect5">
<h6 id="_input_ports_3">3.3.1.2.1. Input Ports</h6>
<div class="paragraph">
<p>rssAccelerationRestrictions: The restrictions on the acceleration for the actuator control calculated by RSS.</p>
</div>
<div class="paragraph">
<p>actuatorControlCommandIn: The control commands from the PlanningSubsystem to control the vehicle actuator system.</p>
</div>
</div>
<div class="sect5">
<h6 id="_output_ports_5">3.3.1.2.2. Output Ports</h6>
<div class="paragraph">
<p>actuatorControlCommandOut: The adapted control commands from the PlanningSubsystem to control the vehicle actuator
system in a RSS safe manner.</p>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_act_2">3.3.1.3. Act</h5>
<div class="paragraph">
<p>The Act entity is responsible to execute the moves which the PlanningSubsytem has calculated. This contains the ADS
actuator specific implementation of the Act part which already exists.</p>
</div>
<div class="sect5">
<h6 id="_input_ports_4">3.3.1.3.1. Input Ports</h6>
<div class="paragraph">
<p>actuatorControlCommand: The control commands to control the vehicle actuator system.</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_rss">3.4. RSS</h3>
<div class="paragraph">
<p>The RSS part restricts the moves the Plan part has calculated according to the RSS proper response</p>
</div>
<div class="sect3">
<h4 id="_rsssubsystem">3.4.1. RssSubsystem</h4>
<div class="paragraph">
<p>The RssSubsystem realizes the RSS part functionality. It implements the RSS checks based on the RssWorldModelData
received from the SensorSubsystem:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Keep a safe distance from the car in front</p>
</li>
<li>
<p>Leave time and space for others in lateral maneuvers</p>
</li>
<li>
<p>Exhibit caution in occluded areas [not implemented yet]</p>
</li>
<li>
<p>Right-of-Way is given, not taken</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>In case a dangerous situation is detected a respective proper response is calculated and the actuator control commands
received
from the PlanningSubsystem are restricted accordingly to realize planning safety.</p>
</div>
<div class="sect4">
<h5 id="_input_ports_5">3.4.1.1. Input Ports</h5>
<div class="paragraph">
<p>rssWorldModelData: The world model data required to calculate the RSS checks</p>
</div>
</div>
<div class="sect4">
<h5 id="_output_ports_6">3.4.1.2. Output Ports</h5>
<div class="paragraph">
<p>rssAccelerationRestrictions: The restrictions on the acceleration for the actuator control calculated by RSS.</p>
</div>
<div id="Figure:RssSubsystem" class="imageblock">
<div class="content">
<img src="./images/img/e4287b00-c27b-4901-8571-3a17b745ee44_url_d03f53e8-c082-4654-8d3b-b385c433028a.tmp" alt="e4287b00 c27b 4901 8571 3a17b745ee44 url d03f53e8 c082 4654 8d3b b385c433028a">
</div>
<div class="title">Figure 15. RSS internal processing steps to perform RSS checks and execute the RSS proper response</div>
</div>
</div>
<div class="sect4">
<h5 id="_rsssituationextraction">3.4.1.3. RssSituationExtraction</h5>
<div class="paragraph">
<p>The RssSituationExtraction entity transforms the global Cartesian world model data into individual RssSituations between
the ego vehicle and each of the objects. For every pair &lt;ego-vehicle, object&gt; in the world model data the individual
situation coordinate system transformation is performed.</p>
</div>
<div class="sect5">
<h6 id="_input_ports_6">3.4.1.3.1. Input Ports</h6>
<div class="paragraph">
<p>rssWorldModelData: Global Cartesian world model data providing information on the local surrounding environment required
to create the situation coordinate system pairs &lt;ego-vehicle, object&gt;. Requires local map data (i.e. lane segments and
semantics on intersections and priority rules), ego vehicle and object (i.e. position, velocity and RSS dynamics)
information.</p>
</div>
</div>
<div class="sect5">
<h6 id="_output_ports_7">3.4.1.3.2. Output Ports</h6>
<div class="paragraph">
<p>rssSituations: A list of individual RSS Situations between the ego vehicle and each of the objects. Each situation is
formulated within its own lane-based coordinate system. EgoVehicle and Objects: i.e. (relative) position, velocity,
priority flag, situation specific RSS acceleration values.</p>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_rsssituationchecking">3.4.1.4. RssSituationChecking</h5>
<div class="paragraph">
<p>The RssSituationChecking entity performs the RSS check on all incoming individual RssSituations and creates the required
RssResponseStates if dangerous situations are detected.</p>
</div>
<div class="sect5">
<h6 id="_input_ports_7">3.4.1.4.1. Input Ports</h6>
<div class="paragraph">
<p>rssSituations: The RssSituations as provided by the RssSituationExtraction</p>
</div>
</div>
<div class="sect5">
<h6 id="_output_ports_8">3.4.1.4.2. Output Ports</h6>
<div class="paragraph">
<p>rssResponseStates: A list of RSS response states in respect to the individual RSS Situations</p>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_rssresponseresolving">3.4.1.5. RssResponseResolving</h5>
<div class="paragraph">
<p>The RssResponseResolving entity handles conflicts of the incoming RssResponseStates. It combines the individual
&lt;ego-vehicle, object&gt; situation specific response states into one single overall RssResponseState.</p>
</div>
<div class="sect5">
<h6 id="_input_ports_8">3.4.1.5.1. Input Ports</h6>
<div class="paragraph">
<p>rssResponseStates: The list of RSS response states as provided by the RssSituationChecking</p>
</div>
</div>
<div class="sect5">
<h6 id="_output_ports_9">3.4.1.5.2. Output Ports</h6>
<div class="paragraph">
<p>rssResponseState: Resulting combined overall RssResponseState.</p>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_rssresponsetransformation">3.4.1.6. RssResponseTransformation</h5>
<div class="paragraph">
<p>The RssResponseTransformation entity transforms the overall RssResponseState back into the global Cartesian world. This
results in RSS restrictions for the actuator commands.</p>
</div>
<div class="sect5">
<h6 id="_input_ports_9">3.4.1.6.1. Input Ports</h6>
<div class="paragraph">
<p>rssWorldModelData: Global Cartesian world model data providing information on the local surrounding environment required
to transform the RSS response state back into acceleration restrictions in the Catesian space. Requires local map data
(i.e. lane segments of the ego vehicle) and ego vehicle (position, velocity and RSS dynamics) information.</p>
</div>
<div class="paragraph">
<p>rssResponseState: Resulting combined overall RssResponseState provided by the RssResponseResolving.</p>
</div>
</div>
<div class="sect5">
<h6 id="_output_ports_10">3.4.1.6.2. Output Ports</h6>
<div class="paragraph">
<p>rssAccelerationRestrictions: The resulting restrictions of the actuator control command</p>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="Section::HLD::SoftwareArchitecture">4. ad-rss-lib: Software Architecture</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This section describes the software architecture of the ad-rss-lib in detail. The static view covers the deployed
artifacts, the interfaces and data types of the library. The dynamic view describes the behaviour of the library in more
detail.</p>
</div>
<div class="sect2">
<h3 id="_static_view">4.1. Static View</h3>
<div id="Figure:ad_rss_lib" class="imageblock">
<div class="content">
<img src="./images/img/3215dc26-cb11-4d2a-bee0-5bce35dc7d8a_url_30dce600-cb20-4ebb-9cd6-e2b2d333579c.tmp" alt="3215dc26 cb11 4d2a bee0 5bce35dc7d8a url 30dce600 cb20 4ebb 9cd6 e2b2d333579c">
</div>
<div class="title">Figure 16. The packages within the ad-rss-lib.</div>
</div>
<div class="paragraph">
<p>The ad-rss-lib is implemented in C++. Based on a set of datatype definitions the interfaces are provided to:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>prepare the RSS situations between individual pairs of ego vehicle and objects</p>
</li>
<li>
<p>trigger the situation specific RSS calculations</p>
</li>
<li>
<p>resolve the situation specific responses to one global response</p>
</li>
<li>
<p>translate the global response into concrete restrictions of the actuator control commands</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Finally, the implementation of the ad-rss-lib is deployed within one library artifact named ad-rss-lib.</p>
</div>
<div class="sect3">
<h4 id="_interfaces">4.1.1. Interfaces</h4>
<div class="paragraph">
<p>Definition of Interfaces provided within the ad-rss-lib implementation.</p>
</div>
<div class="paragraph">
<p>The ad-rss-lib is implemented as a whole within the namespace ad_rss.</p>
</div>
<div class="sect4">
<h5 id="_namespace_ad_rss_core">4.1.1.1. Namespace ad_rss::core</h5>
<div class="paragraph">
<p>Namespace for RSS core interfaces and operations.</p>
</div>
<div class="paragraph">
<p>This contains the interfaces including the operations the ad-rss-lib provides to the user to perform the RSS
functionality.</p>
</div>
<div class="sect5">
<h6 id="_rsscheck">4.1.1.1.1. RssCheck</h6>
<div class="paragraph">
<p>Class providing the functionality of the RSS check sequence at once with the RSS world model as input and restrictions
of the acceleration for the actuator control as output. This class internally makes use of the RssSituationExtraction,
RssSituationChecking, RssResponseResolving and RssResponseTransformation functionality.</p>
</div>
<div class="paragraph">
<p>calculateAccelerationRestriction</p>
</div>
<div class="paragraph">
<p>Perform the calculation of the RSS checks on the current world model and provide the acceleration restriction for the
actuator control.</p>
</div>
<div class="paragraph">
<p>Returns true if the checks could be calculated, false if there was an error during the operation.</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">returns</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">bool</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Out</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">False on failure.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">worldModel</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">WorldModel</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">In</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The current world model information.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">accelerationRestriction</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">AccelerationRestriction</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Out</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The restrictions on the vehicle acceleration to become RSS safe.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect5">
<h6 id="_rsssituationextraction_2">4.1.1.1.2. RssSituationExtraction</h6>
<div class="paragraph">
<p>Class providing functions required for the extraction of the RSS situations from the RSS world model.</p>
</div>
<div class="paragraph">
<p>extractSituations</p>
</div>
<div class="paragraph">
<p>Extract all RSS situation pairs pair &lt;ego-vehicle, object&gt; to be checked from the world model.</p>
</div>
<div class="paragraph">
<p>Returns true if the situations could be created, false if there was an error during the operation.</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">returns</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">bool</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Out</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">False on failure.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">worldModel</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">WorldModel</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">In</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The current world model information.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">situationVector</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">SituationVector</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Out</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The vector of situations to be analyzed with RSS.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect5">
<h6 id="_rsssituationchecking_2">4.1.1.1.3. RssSituationChecking</h6>
<div class="paragraph">
<p>Class providing functions required for the RSS checks of the situation.</p>
</div>
<div class="paragraph">
<p>checkSituations</p>
</div>
<div class="paragraph">
<p>Checks if the current situation pairs &lt;ego-vehicle, object&gt; are safe.</p>
</div>
<div class="paragraph">
<p>Returns true if the situations could be analyzed, false if an error occurred during evaluation.</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">returns</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">bool</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Out</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">False on failure.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">situationVector</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">SituationVector</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">In</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The vector of situations that should be analyzed.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">responseStateVector</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ResponseStateVector</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Out</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The vector of response states for the current situations.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect5">
<h6 id="_rssresponseresolving_2">4.1.1.1.4. RssResponseResolving</h6>
<div class="paragraph">
<p>Class to resolve the responseStateVector of the different situation specific responses into a single responseState. This
class tracks the RSS response state of every situation id over time and especially stores the respective response state
before the danger threshold time. This requires that the id of a RSS situation remains constant over time in case it
refers to the same object; otherwise tracking over time will fail.</p>
</div>
<div class="paragraph">
<p>provideProperResponse</p>
</div>
<div class="paragraph">
<p>Calculate the proper response from of the current situation pair &lt;ego-vehicle, object&gt; response states. It combines all
response states into one single overall RssResponse.</p>
</div>
<div class="paragraph">
<p>Returns true if the proper response state could be calculated, false otherwise.</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">returns</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">bool</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Out</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">False on failure.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">currentStates</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ResponseStateVector</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">In</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Vector with all the responses gather for the current situations</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">responseState</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ResponseState</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Out</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The proper overall response state.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect5">
<h6 id="_rssresponsetransformation_2">4.1.1.1.5. RssResponseTransformation</h6>
<div class="paragraph">
<p>Class providing functions required to transform the proper response into restrictions of the acceleration for the
actuator control.</p>
</div>
<div class="paragraph">
<p>transformProperResponse</p>
</div>
<div class="paragraph">
<p>Transform the proper response into restrictions of the acceleration for the actuator control. Since the
RssResponseResolving entity is acting within the situation coordinate system, it is not able to decide on the actual
lateral movement of the ego-vehicle within its lane. Within this function the required world model data is available to
decide if a desired lateral response can be resolved either by applying a restriction on the lateral acceleration or, in
addition, requires a restriction of the longitudinal acceleration.</p>
</div>
<div class="paragraph">
<p>Returns true if the acceleration restrictions could be calculated, false otherwise.</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">returns</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">bool</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Out</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">False on failure.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">worldModel</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">WorldModel</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">In</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The current world model information.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">response</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ResponseState</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">In</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The proper overall response to be transformed.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">accelerationRestriction</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">AccelerationRestriction</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Out</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The restrictions on the vehicle acceleration to become RSS safe.</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_datatypes">4.1.2. DataTypes</h4>
<div class="paragraph">
<p>Definition of DataTypes used within the ad-rss-lib implementation.</p>
</div>
<div class="paragraph">
<p>The ad-rss-lib is implemented as a whole within the namespace ad_rss.</p>
</div>
<div id="Figure:Namespace_ad_rss" class="imageblock">
<div class="content">
<img src="./images/img/1dab8fd5-c1cf-4a62-9232-66e2e9279428_url_c4da4d92-8fec-4665-bd03-914ad6ba8238.tmp" alt="1dab8fd5 c1cf 4a62 9232 66e2e9279428 url c4da4d92 8fec 4665 bd03 914ad6ba8238">
</div>
<div class="title">Figure 17. The RSS datatypes are organized within several sub-namespaces.</div>
</div>
<div class="paragraph">
<p>For a detailed explanation of the individual types, please have a look into the doxygen documentation (<a href="https://intel.github.io/ad-rss-lib/doxygen/index.html" class="bare">https://intel.github.io/ad-rss-lib/doxygen/index.html</a>).</p>
</div>
<div class="sect4">
<h5 id="_namespace_ad_rss_physics">4.1.2.1. Namespace ad_rss::physics</h5>
<div class="paragraph">
<p>Namespace for RSS physics datatypes.</p>
</div>
<div class="paragraph">
<p>This contains types declaring physical measures referring time, distance, speed and basic combinations of that like
ranges.</p>
</div>
</div>
<div class="sect4">
<h5 id="_namespace_ad_rss_world">4.1.2.2. Namespace ad_rss::world</h5>
<div class="paragraph">
<p>Namespace for RSS world datatypes.</p>
</div>
<div class="paragraph">
<p>This contains types that are used to describe the local world model RSS is acting on. These describe the ego vehicle and
object states as well as the parts of the road network relevant to judge the situations between ego vehicle and the
objects.</p>
</div>
</div>
<div class="sect4">
<h5 id="_namespace_ad_rss_situation">4.1.2.3. Namespace ad_rss::situation</h5>
<div class="paragraph">
<p>Namespace for RSS situation datatypes.</p>
</div>
<div class="paragraph">
<p>This contains types that are used within the calculation of the RSS formulas which are performed within the situation
coordinate system.</p>
</div>
</div>
<div class="sect4">
<h5 id="_namespace_ad_rss_state">4.1.2.4. Namespace ad_rss::state</h5>
<div class="paragraph">
<p>Namespace for RSS state datatypes.</p>
</div>
<div class="paragraph">
<p>This contains types used in conjunction with the RSS state and responses.</p>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_dynamic_view">4.2. Dynamic View</h3>
<div id="Figure:RssSubsystemChecker" class="imageblock">
<div class="content">
<img src="./images/img/ef40ca1b-866b-44e8-8e6d-a3d235c569e9_url_5931b775-17c8-4d95-ad51-e9e5c3cf8e76.tmp" alt="ef40ca1b 866b 44e8 8e6d a3d235c569e9 url 5931b775 17c8 4d95 ad51 e9e5c3cf8e76">
</div>
<div class="title">Figure 18. RSS internal processing steps to perform RSS checks and execute the RSS proper response</div>
</div>
<div class="paragraph">
<p>The RssSubsystem realizes the RSS part functionality. It implements the RSS checks based on the RssWorldModelData
received from the SensorSubsystem:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Keep a safe distance from the car in front</p>
</li>
<li>
<p>Leave time and space for others in lateral maneuvers</p>
</li>
<li>
<p>Exhibit caution in occluded areas [not implemented yet]</p>
</li>
<li>
<p>Right-of-Way is given, not taken</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>In case a dangerous situation is detected a respective proper response is calculated and the actuator control commands
received
from the PlanningSubsystem are restricted accordingly to realize planning safety.</p>
</div>
<div class="sect3">
<h4 id="_rsssituationextractionimpl">4.2.1. RssSituationExtractionImpl</h4>
<div class="paragraph">
<p>RssSituationExtractionImpl describes the implementation of the RssSituationExtraction entity by defining a statechart.</p>
</div>
<div id="Figure:RssSituationExtractionImpl" class="imageblock">
<div class="content">
<img src="./images/img/33056e83-b4eb-47a3-98a5-0e762dcdd0f0_url_ef104650-716f-4190-bef9-9685cfaea8b7.tmp" alt="33056e83 b4eb 47a3 98a5 0e762dcdd0f0 url ef104650 716f 4190 bef9 9685cfaea8b7">
</div>
<div class="title">Figure 19. Statechart Diagram describing the dynamic behavior of the RssSituationExtraction entity.</div>
</div>
<div class="paragraph">
<p>The following table describes the events, triggers, states and their transitions of the statechart in detail.</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Event/Trigger</th>
<th class="tableblock halign-left valign-top">Argument Type</th>
<th class="tableblock halign-left valign-top">Argument</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">evRssWorldModel</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">WorldModel</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">worldModel</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Event trigged when RssWorldModel data is received at the input.</p></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">State</th>
<th class="tableblock halign-left valign-top">Transition</th>
<th class="tableblock halign-left valign-top">Target State</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">idle</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Idle state. Waiting for input data.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#8594;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">evRssWorldModel</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">extractSituations</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">WorldModel data received.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">extractSituations</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">All input data received. Perform operation to extract situations.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#8594;</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">checkOperationResult</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">error</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Final error state.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_rsssituationcheckingimpl">4.2.2. RssSituationCheckingImpl</h4>
<div class="paragraph">
<p>RssSituationCheckingImpl describes the implementation of the RssSituationChecking entity by defining a statechart.</p>
</div>
<div id="Figure:RssSituationCheckingImpl" class="imageblock">
<div class="content">
<img src="./images/img/6bded48d-c54a-4c10-ba6e-564a9047b27b_url_4ee9d29c-aced-4c30-a94b-e18f0def895d.tmp" alt="6bded48d c54a 4c10 ba6e 564a9047b27b url 4ee9d29c aced 4c30 a94b e18f0def895d">
</div>
<div class="title">Figure 20. Statechart Diagram describing the dynamic behavior of the RssSituationChecking entity.</div>
</div>
<div class="paragraph">
<p>The following table describes the events, triggers, states and their transitions of the statechart in detail.</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Event/Trigger</th>
<th class="tableblock halign-left valign-top">Argument Type</th>
<th class="tableblock halign-left valign-top">Argument</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">evRssSituationVector</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">SituationVector</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">situationVector</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Event trigged when RssSituationVector data is received at the
input.</p></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">State</th>
<th class="tableblock halign-left valign-top">Transition</th>
<th class="tableblock halign-left valign-top">Target State</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">idle</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Idle state. Waiting for input data.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#8594;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">evRssSituationVector</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">checkSituations</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">SituationVector data received.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">checkSituations</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">All input data received. Perform operation to check situations.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#8594;</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">checkOperationResult</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">error</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Final error state.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_rssresponseresolvingimpl">4.2.3. RssResponseResolvingImpl</h4>
<div class="paragraph">
<p>RssResponseResolvingImpl describes the implementation of the RssResponseResolving entity by defining a statechart.</p>
</div>
<div id="Figure:RssResponseResolvingImpl" class="imageblock">
<div class="content">
<img src="./images/img/841e0fb8-7627-4e1a-93d5-be6a40d71719_url_297d209b-1f20-4dd1-9461-425e2c4fb20c.tmp" alt="841e0fb8 7627 4e1a 93d5 be6a40d71719 url 297d209b 1f20 4dd1 9461 425e2c4fb20c">
</div>
<div class="title">Figure 21. Statechart Diagram describing the dynamic behavior of the RssResponseResolving entity.</div>
</div>
<div class="paragraph">
<p>The following table describes the events, triggers, states and their transitions of the statechart in detail.</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Event/Trigger</th>
<th class="tableblock halign-left valign-top">Argument Type</th>
<th class="tableblock halign-left valign-top">Argument</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">evRssResponseStateVector</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ResponseStateVector</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">responseStateVector</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Event trigged when RssResponseStateVector data is
received at the input.</p></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">State</th>
<th class="tableblock halign-left valign-top">Transition</th>
<th class="tableblock halign-left valign-top">Target State</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">idle</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Idle state. Waiting for input data.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#8594;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">evRssResponseStateVector</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">resolveResponse</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ResponseStateVector data received.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">resolveResponse</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">All input data received. Perform operation to resolve responses.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#8594;</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">checkOperationResult</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">error</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Final error state.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_rssresponsetransformationimpl">4.2.4. RssResponseTransformationImpl</h4>
<div class="paragraph">
<p>RssResponseTransformationImpl describes the implementation of the RssResponseTransformation entity by defining a
statechart.</p>
</div>
<div id="Figure:RssResponseTransformationImpl" class="imageblock">
<div class="content">
<img src="./images/img/97f474d5-a4f5-4a3d-9733-cfc543afacf3_url_cb9fc4f4-f5d4-47eb-b3a5-d46e799422fb.tmp" alt="97f474d5 a4f5 4a3d 9733 cfc543afacf3 url cb9fc4f4 f5d4 47eb b3a5 d46e799422fb">
</div>
<div class="title">Figure 22. Statechart Diagram describing the dynamic behavior of the RssResponseTransformation entity.</div>
</div>
<div class="paragraph">
<p>The following table describes the events, triggers, states and their transitions of the statechart in detail.</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Event/Trigger</th>
<th class="tableblock halign-left valign-top">Argument Type</th>
<th class="tableblock halign-left valign-top">Argument</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">evRssResponseState</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ResponseState</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">responseState</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Event trigged when RssResponseState data is received at the input.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">evRssWorldModel</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">WorldModel</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">worldModel</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Event trigged when RssWorldModel data is received at the input.</p></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">State</th>
<th class="tableblock halign-left valign-top">Transition</th>
<th class="tableblock halign-left valign-top">Target State</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">idle</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Idle state. Waiting for input data.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#8594;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">evRssWorldModel</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">worldModelDataAvailable</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">WorldModel data received.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#8594;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">evRssResponseState</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">responseStateAvailable</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ResponseState data received.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">worldModelDataAvailable</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">World model data received. Still waiting for response states.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#8594;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">evRssResponseState</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">transformResponse</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ResponseState data received.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">responseStateAvailable</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Response state data received. Still waiting for world model.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#8594;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">evRssWorldModel</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">transformResponse</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">WorldModel data received.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">transformResponse</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">All input data received. Perform operation to transform response.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#8594;</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">checkOperationResult</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">error</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Final error state.</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="Section::HLD::Security">5. Design for Security</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This chapter discusses security aspects.</p>
</div>
<div class="sect2">
<h3 id="_architecture_and_dataflow">5.1. Architecture and dataflow</h3>
<div class="paragraph">
<p>As a reminder of the high-level architecture, we refer to two figures from the chapter
<a href="#Section::HLD::SystemArchitecture">RSS System Architecture Overview</a>.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The first figure, <a href="#Figure:ADS_RSS">Integration of RSS into a system architecture</a>,
shows the RSS function within the autonomous driving
(AD) system. The RSS function has a single input called
<code>rssWorldModelData</code>, and a single output called <code>rssAccelerationRestrictions</code>.</p>
</li>
<li>
<p>The second figure, <a href="#Figure:RssSubsystem">RSS internal processing steps to perform RSS checks and execute the RSS proper response</a>,
shows further detail of the RSS function, with the same external inputs and outputs
(<code>rssWorldModelData</code> and <code>rssAccelerationRestrictions</code>), as well
as the internal calculation steps and internal dataflow.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>In addition, from the chapter <a href="#Section::HLD::SoftwareArchitecture">ad-rss-lib: Software Architecture</a>,
we refer to the figure <a href="#Figure:Namespace_ad_rss__core">[Figure:Namespace_ad_rss__core]</a>.
This figure shows the C++ software class that implements the external
RSS interface, called <code>RssCheck</code>.
The top-level external interface is implemented using a single routine,
called <code>calculateAccelerationRestriction()</code>, which is a member function of
the <code>RssCheck</code> class. This routine has a single input, called <code>worldModel</code> (of
type <code>WorldModel</code>), and a single output,
called <code>accelerationRestriction</code> (of type <code>AccelerationRestriction</code>).
This figure also shows the subroutines called from <code>RssCheck::calculateAccelerationRestriction()</code>, which are part of the core interface of the library.</p>
</div>
<div class="paragraph">
<p>The library is single-thread, does not make network connections, and does not make connections with other processes remote or local.</p>
</div>
<div class="paragraph">
<p>The library does not make use of any 3rd party components, and as such does not have security dependencies.</p>
</div>
<div class="paragraph">
<p>The primary adversary model is one where invalid/incorrect input data could be provided to the library input interface by the system or from an upstream source.</p>
</div>
<div class="paragraph">
<p>In the following sections, we discuss security aspects related to:
input data (implemented by <code>WorldModel</code>), output data (implemented
by <code>AccelerationRestrictions</code>), and the RSS function itself (implemented
by <code>RssCheck</code> and supporting library classes).</p>
</div>
</div>
<div class="sect2">
<h3 id="_rss_input_data_code_worldmodel_code">5.2. RSS input data (<code>WorldModel</code>)</h3>
<div class="sect3">
<h4 id="_input_data_source">5.2.1. Input data source</h4>
<div class="paragraph">
<p>The input data is contained in <code>WorldModel</code>. This data includes distances to
other road agents (vehicles and other) and velocities of other road agents. This
data also includes description of the geometry of the road (and road lanes). All
data types are described in detail in the chapter
<a href="#Section::HLD::SoftwareArchitecture">ad-rss-lib: Software Architecture</a>.</p>
</div>
<div class="paragraph">
<p>The data contained in <code>WorldModel</code> is provided directly by a
calling routine external to the RSS library. Typically, this data will
ultimately originate from the vehicle sensing subsystem, but it is the
responsibility of the calling routine to receive, convert, and provide
this sensing-derived data to the RSS function in the correct format.
The calling routine must ensure the integrity of the input data
provided to the RSS library functions.</p>
</div>
</div>
<div class="sect3">
<h4 id="_validity_of_input_data_and_error_handling">5.2.2. Validity of input data and error handling</h4>
<div class="paragraph">
<p>The library attempts to ensure the validity of the input data, and handle cases of improper or invalid input data, in several ways.</p>
</div>
<div class="paragraph">
<p>Several explicit checks of the input data validity are performed, including the following.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Check that the data structure describing the local road and lane geometries is
internally consistent. The description of a local road follows basic constraints,
and if the description is inconsistent with these constraints, the routine
that analyzes the situation from the input data returns, with the success/fail
flag set to 'fail'.</p>
</li>
<li>
<p>Check that the data structures describing the ego-vehicle or other objects (other
vehicles) are internally consistent. The routine that analyzes the situation checks
against basic constraints. If the constraints are violated, the routine returns
with the success/fail flag set to 'fail'. For this, the routines withinValidInputRange()
are used. The respective Doxygen description of these contains the absolute values against
which the inputs (like e.g. velocities, accelerations, etc.) are checked.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Error handling: Each routine in the library that invokes subroutines checks a success/fail flag returned by the subroutine. In addition, many routines perform custom checking of the internal logic against known constraints of RSS. A failure of a logic check or of a subroutine results in interruption of the routine and a fail flag being passed to the calling routine.</p>
</div>
<div class="paragraph">
<p>Exception handling: The code-blocks in high-level routines are enclosed inside C++ try-catch blocks. Any exception thrown at lower-level software routines results in a fail flag being returned to the caller of the publicly available high-level routines.</p>
</div>
<div class="paragraph">
<p>When any of the above errors occur, the top-level RSS routine,
<code>RssCheck::calculateAccelerationRestriction()</code>, will return with the success/fail
flag set to 'fail'.</p>
</div>
<div class="paragraph">
<p>Logging: The top-level routine in the library returns a success/fail flag that can
be recorded by logging functions that may be available in the overall AD system
(external to the library). Beyond this, the library does not perform error logging internally.</p>
</div>
</div>
<div class="sect3">
<h4 id="_non_functional_requirements">5.2.3. Non-functional requirements</h4>
<div class="paragraph">
<p>The size of the input data (<code>WorldModel</code>) provided to <code>RssCheck</code> is determined by the number of other objects (other vehicles or road agents) that the ego-vehicle is interacting with, and the size of the description of each object and associated road areas.  Based on this, it is straightforward to bound the size of data that must be consumed by the <code>RssCheck</code> in a single call, based on the sizes of individual datatypes and by bounding the number of objects.</p>
</div>
<div class="paragraph">
<p>It is the responsibility of the system integrator to determine the number of objects the system can handle and to bound the size of the input data.</p>
</div>
<div class="paragraph">
<p>It is the responsibility of the system integrator to determine an appropriate rate or a maximum rate at which the top-level routine,
`RssCheck::calculateAccelerationRestriction(), should be invoked.</p>
</div>
<div class="paragraph">
<p>The latency resulting from the processing time of
<code>RssCheck::calculateAccelerationRestriction()</code> should be strictly limited, due
to the real-time nature of the AD system and closed-loop interaction with the
real world environment. This latency should be less than the time period
(1/rate) of the ActuatorSubSystem. It is the responsibility of the system
integrator to ensure that this is achieved, or to achieve a latency below an
upper bound that is tighter (lower) than the one mentioned here.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_rss_output_data_code_accelerationrestriction_code">5.3. RSS output data (<code>AccelerationRestriction</code>)</h3>
<div class="paragraph">
<p><code>RssCheck::calculateAccelerationRestriction()</code> outputs a structure of type
<code>AccelerationRestriction</code>. This is a very small structure that contains three
ranges of acceleration allowed by RSS:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>allowable range of longitudinal acceleration,</p>
</li>
<li>
<p>allowable range of lateral acceleration to the left of the vehicle, and</p>
</li>
<li>
<p>allowable range of lateral acceleration to the right of the vehicle.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Each acceleration range consists of two values: a lower bound and an upper
bound. The lower bound and upper bound simply specify an interval of allowable
acceleration. Note that a negative value of acceleration implies deceleration,
i.e. braking.</p>
</div>
<div class="sect3">
<h4 id="_output_data_destination">5.3.1. Output data destination</h4>
<div class="paragraph">
<p>These three ranges (in <code>AccelerationRestriction</code>) are provided to the system
that calls the RSS top-level routine, and indicate the range of acceleration
that the AD system must ultimately achieve in order to comply to RSS. In other
words, if the AD system seeks to comply to the RSS model, it must achieve
an acceleration that is within these bounds provided by the RSS function.</p>
</div>
<div class="paragraph">
<p>Typically, the system would provide the RSS acceleration restriction data to the
actuation and control subsystem of the autonomous driving system. This
subsystem, external to the RSS library, should enforce the lower and upper
bounds of lateral and longitudinal acceleration provided by the RSS function. Implementation of this process is external to the RSS library, and the system
integrator must ensure that this is implemented properly and that RSS output
values are used correctly.</p>
</div>
</div>
<div class="sect3">
<h4 id="_bounds_on_the_output_data_values">5.3.2. Bounds on the output data values</h4>
<div class="paragraph">
<p>As discussed above, the output values of the RSS function are lower and upper
bounds on acceleration.  The lower and upper bounds determined by the RSS
function originate from the input provided to the RSS function. Namely,
acceleration values are provided as dynamics properties of each vehicle
acting as road agent/object in the situation. Hence, in the current
implementation, the set of possible output data values is a very small
set of values that are provided as input.</p>
</div>
<div class="paragraph">
<p>The output values can be further bounded within absolute lower and upper
limits by bounding the input values within those desired limits.
Also check the Doxygen documentation of the withinValidInputRange() functions of the
respective data types for the actual values defined.</p>
</div>
<div class="paragraph">
<p>It is the responsibility of the system external to the RSS library to ensure
that the acceleration and deceleration actually achieved by the vehicle always
remain within the limits calculated by the RSS function, and remain within other
limits unrelated to RSS (e.g. physical limits imposed by the vehicle
dynamics and the environment).</p>
</div>
</div>
<div class="sect3">
<h4 id="_bounds_on_the_output_data_size">5.3.3. Bounds on the output data size</h4>
<div class="paragraph">
<p>The output data of the RSS calculations consists of 6 floating point values
(3 ranges, each with a lower and upper limit). As such, the size of the output
data is strictly bounded already.</p>
</div>
<div class="paragraph">
<p>It is the responsibility of the system integrator to determine an appropriate
rate or maximum rate at which to invoke the RSS library function.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_rss_library_code_validation">5.4. RSS library code validation</h3>
<div class="sect3">
<h4 id="_dependencies">5.4.1. Dependencies</h4>
<div class="paragraph">
<p>The RSS library has no dependency on any external library (except for the
C++ Standard Library).</p>
</div>
</div>
<div class="sect3">
<h4 id="_coding_standards">5.4.2. Coding standards</h4>
<div class="paragraph">
<p>Code quality has been ensured through unit testing.</p>
</div>
<div class="paragraph">
<p>Unit testing achieved code coverage of: 100% functions, 100% lines, &gt;80% branches.
Current coverage measures can be retrieved via github deployment:
<a href="https://intel.github.io/ad-rss-lib/coverage/index.html" class="bare">https://intel.github.io/ad-rss-lib/coverage/index.html</a></p>
</div>
</div>
<div class="sect3">
<h4 id="_compiler_and_compiler_security_flags">5.4.3. Compiler and compiler security flags</h4>
<div class="paragraph">
<p>The development platform is Ubuntu Linux 16.04 Xenial.</p>
</div>
<div class="paragraph">
<p>A standard cmake toolchain has been used to compile the library. The compiler is g 5.4.0; g 4.8.0 is also supported.</p>
</div>
<div class="paragraph">
<p>The following, strict, compilation flags are used: C++11, -Werror, -Wall, -Wextra, -pedantic, -Wconversion, -Wsign-conversion, -Wfloat-equal -Wshadow -Wswitch-default -Wenum-compare -Wformat -Wformat-security.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>-Werror turns all warnings into errors</p>
</li>
<li>
<p>-Wall enables many warnings about code constructs that are questionable</p>
</li>
<li>
<p>-Wextra enables additional warnings not enabled by -Wall</p>
</li>
<li>
<p>-Wconversion warns for implicit conversions (e.g. between integer and real types)</p>
</li>
<li>
<p>-Wsign-conversion warn for implicit conversions that may alter a value</p>
</li>
<li>
<p>-pedantic issues all warnings demanded by strict ISO C and C++</p>
</li>
<li>
<p>-Wfloat-equal warn if floating-point values are used in equality comparisons</p>
</li>
<li>
<p>-Wshadow warn on shadowed variable declarations</p>
</li>
<li>
<p>-Wswitch-default warn if the default case is missing in a switch</p>
</li>
<li>
<p>-Wenum-compare warn about a comparison between values of different enumerated types</p>
</li>
<li>
<p>-Wformat* warns about errors within format strings</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>In addition, there are compiler flags
* -fstack-protector-all -fasynchronous-unwind-tables -fno-omit-frame-pointer -fno-delete-null-pointer-checks -fno-strict-overflow -fwrapv -fPIE -fPIC -D_FORTIFY_SOURCE=2
and linker flags
* -Wl,-z,now -Wl,-z,relro -pie
defined to harden the resulting binaries. Hardening is disabled by default, as build hardening is usually injected by the surrounding build system.</p>
</div>
<div class="paragraph">
<p>Compilation with these flags completes without any error or warning.</p>
</div>
</div>
<div class="sect3">
<h4 id="_code_analysis">5.4.4. Code analysis</h4>
<div class="paragraph">
<p>The code analysis tool <code>cppcheck</code> was run on the library code, and no relevant issues found.</p>
</div>
</div>
<div class="sect3">
<h4 id="_critical_assets">5.4.5. Critical assets</h4>
<div class="paragraph">
<p>The library does not contain critical assets from a security perspective, other than the library code itself.</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="Section::HLD::Safety">6. Design for Safety</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In principle, RSS is implementing safety of the intended functionality
(SOTIF).
One can apply RSS without general functional safety (FuSa) aspects
to safeguard the planning functionality.
If RSS is implemented in an ADS with FuSa
constraints on system level, RSS contributes to the FuSa goals of the whole ADS.</p>
</div>
</div>
</div>
<h1 id="_appendix" class="sect0">Appendix</h1>
<div class="sect1">
<h2 id="Section::ParameterDiscussion">7. Parameter Discussion</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The RSS papers uses a few constants required for the safety calculations. The
values for these constants are not yet defined and open for
discussion/regulation. Nevertheless, the implementation of the ad-rss-lib needs
to define initial values for these functions.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>To be as flexible as possible, the parameters are implemented as configuration
values so these can be easily adjusted during evaluation or after the release.
In other words, the values are not hard coded in the library, but can be
changed via the provided inputs.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>In the following, the key parameters and the decision for possible initial
values are discussed. The used parameters are (see paper 1 in
<a href="#Table::References">References</a>):</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Response time <em>&#961;</em>.
It is assumed that an AV vehicle has a shorter response time than a human
driver. Therefore, there is a need to have two different parameters. As it
might not be possible to determine whether another object is an AV vehicle or
has a human driver, the ad-rss-lib will safely assume that all other objects
are driven by humans. Hence, two parameters for the response time are used.</p>
<div class="ulist">
<ul>
<li>
<p><em>&#961;<sub>ego</sub></em> for the ego vehicle</p>
</li>
<li>
<p><em>&#961;<sub>other</sub></em> for all other objects</p>
</li>
</ul>
</div>
</li>
<li>
<p>Acceleration <em>&#945;</em>.
RSS proposes several different acceleration/deceleration values. One could
argue that acceleration/deceleration differs with the type of vehicle. Also
at least the acceleration is dependent on the current vehicle speed. As it
cannot be assured that the individual acceleration of each and every car can
be known and the specific car can be reliably detected, the ad-rss-lib will
assume fixed constants for those values. These could be either the maximum
physically possible values or restrictions that are imposed by regulation.
Also there will not be different values for the ego vehicle and the other
vehicles. It could be argued that for the ego vehicle e.g. desired
acceleration might be known. Therefore, a shorter safety distance would be
sufficient. But as all other vehicles do not know about the intention of the
ego vehicle this would lead to a violation of their safe space. So the ad-rss-lib
will need to calculate its checks with the globally defined
accelerations values even if the vehicle does not intend to utilize them to
its limits.
The parameters used for acceleration are:</p>
<div class="ulist">
<ul>
<li>
<p><em>&#945;<sub>accel,max</sub></em> maximum possible acceleration</p>
</li>
<li>
<p><em>&#945;<sub>brake,min</sub></em> minimum allowed braking deceleration in longitudinal
direction for most scenarios</p>
</li>
<li>
<p><em>&#945;<sub>brake,max</sub></em> maximum allowed deceleration in longitudinal direction</p>
</li>
<li>
<p><em>&#945;<sub>brake,min,correct</sub></em> minimum allowed deceleration in longitudinal
direction for a car on its lane with another car approaching on the same
lane in wrong driving direction</p>
</li>
<li>
<p><em>&#945;<sup>lat</sup><sub>brake,min</sub></em> minimum allowed braking deceleration in lateral
direction</p>
</li>
<li>
<p><em>&#945;<sup>lat</sup><sub>accel,max</sub></em> maximum allowed acceleration in lateral direction</p>
</li>
<li>
<p><em>&#948;<sup>lat</sup><sub>min</sub></em> fluctuation margin for that needs to be respected when
calculating lateral safe distance</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="_decision_on_selected_parameter_values">7.1. Decision on Selected Parameter Values</h3>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>The following parameter values are only suggestions and open for discussion.
These can be changed at anytime, if it is required.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="sect3">
<h4 id="_response_time">7.1.1. Response time</h4>
<div class="paragraph">
<p>For the response times a common sense value for human drivers is about 2
seconds. For an AV vehicle the response time could be way lower. In order to be
not too restrictive the initial value for the ego vehicle response time will be
assumed as 1 second. Hence, <em>&#961;<sub>other</sub> = 2 s</em> and <em>&#961;<sub>ego</sub> = 1 s</em>. If we
assume a case of AD vehicles only, the response time may be reduced.</p>
</div>
</div>
<div class="sect3">
<h4 id="_longitudinal_acceleration">7.1.2. Longitudinal Acceleration</h4>
<div class="paragraph">
<p>Finding meaningful acceleration values is more complicated. At the one hand the
values should be as close as possible or even exceed the maximum physically
possible values. The minimum deceleration values must also not exceed normal
human driving behavior. So assuming a too high deceleration for other cars may
lead to a false interpretation of the situation.</p>
</div>
<div class="paragraph">
<p>On the other hand a too big difference between the minimum and maximum
acceleration values will lead to a very defensive driving style. As a result,
participating in dense traffic, will not be possible (see
<a href="#Figure:SafetyDistanceCity">Required safety distance for cars driving at 50 km/h (city speed) in same direction with <em>α<sub>brake,min</sub> = 4 m/s<sup>2</sup></em> and <em>α<sub>brake,max</sub> = 8 m/s<sup>2</sup></em> and <em>ρ<sub>ego</sub> = ρ<sub>other</sub> = 2 s</em></a>). A rule of thumb for deceleration in German
driving schools is: <em>&#945;<sub>brake,min</sub> = 4 m/s<sup>2</sup></em> and <em>&#945;<sub>brake,max</sub> = 8 m/s<sup>2</sup></em></p>
</div>
<div class="paragraph">
<p>But on the other hand, modern cars are able to decelerate with up to <em>12 m/s<sup>2</sup></em>.
Especially for deceleration, it is questionable whether it is possible and
tolerable to restrict maximum braking below physically possible braking force.</p>
</div>
<div class="paragraph">
<p>For the maximum acceleration at low speeds a standard car will be in the range
of <em>3.4 m/s<sup>2</sup></em> to <em>7 m/s<sup>2</sup></em>. But there are also sport cars that can go faster
than that. But for acceleration a regulation to a maximum value seems to be
more likely than for deceleration.</p>
</div>
<div class="sect4">
<h5 id="_restricting_velocity_to_the_current_speed_limit">7.1.2.1. Restricting velocity to the current speed limit</h5>
<div id="Figure:SafetyDistanceCity" class="imageblock">
<div class="content">
<img src="./images/accelSafety.svg" alt="accelSafety">
</div>
<div class="title">Figure 23. Required safety distance for cars driving at 50 km/h (city speed) in same direction with <em>α<sub>brake,min</sub> = 4 m/s<sup>2</sup></em> and <em>α<sub>brake,max</sub> = 8 m/s<sup>2</sup></em> and <em>ρ<sub>ego</sub> = ρ<sub>other</sub> = 2 s</em></div>
</div>
<div class="paragraph">
<p>The assumption that a car can always accelerate at <em>&#945;<sub>accel,max</sub></em>
during the reponse time, leads to a significant increase of the required safety
distance. <a href="#Figure:SafetyDistanceCity">Required safety distance for cars driving at 50 km/h (city speed) in same direction with <em>α<sub>brake,min</sub> = 4 m/s<sup>2</sup></em> and <em>α<sub>brake,max</sub> = 8 m/s<sup>2</sup></em> and <em>ρ<sub>ego</sub> = ρ<sub>other</sub> = 2 s</em></a> shows the required safety distance for
different acceleration values. So acceleration about <em>4 m/s<sup>2</sup></em> doubles the
required safety distance from <em>40 m</em> to about <em>80 m</em> at city speeds.</p>
</div>
<div class="paragraph">
<p>Therefore, it might be advisable to add a restriction that a car is only
allowed to accelerate up to the allowed speed limit. In addition, the common
behavior (in Germany) is to respect a safety distance of speed/2, e.g. in a
city with a speed limit of <em>50 km/h</em> the safety distance shall be <em>25 m</em>.
Hence, it is obvious that the parameters may require some adjustments to allow
reasonable driving.</p>
</div>
</div>
<div class="sect4">
<h5 id="_further_possible_restrictions">7.1.2.2. Further possible restrictions</h5>
<div class="paragraph">
<p>Another possibility to decrease the required safety distance to the leading
vehicle would be to take the intention of the ego vehicle into account. E.g. if
the ego vehicle is following another vehicle and is not intending to
accelerate, then there is no need to assume that the ego vehicle is
accelerating during its response time. Nevertheless, there are several issues
with that approach:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>It needs to be assured that all intended and unintended accelerations
(e.g. driving down a slope) are known to RSS.</p>
</li>
<li>
<p>If RSS formulas are regarded as regulations, the safety distance must be kept
regardless to the intent of the vehicle.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Therefore, in the current implementation this approach will not be applied.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_lateral_acceleration">7.1.3. Lateral Acceleration</h4>
<div class="paragraph">
<p>When defining the parameters for lateral acceleration and deceleration, it is
import to keep in mind that the definition must allow bypassing of vehicles.
Physically high lateral accelerations are possible.
In order to be able to bypass a vehicle that is driving on a parallel lane,
the safe lateral distance needs to be safe during the complete response time of
the other vehicle.</p>
</div>
<div class="paragraph">
<p>Let us consider two identical vehicles driving on the centerline of two adjacent
lanes with zero lateral velocity. There is no lateral conflict, if the distance
between the border of the car and the adjacent lane is bigger than the distance
that the vehicle will cover when accelerating laterally at maximum during its
response time and then decelerating to zero lateral velocity.</p>
</div>
<div id="Figure:LateralDistance" class="imageblock">
<div class="content">
<img src="./images/accelLat.svg" alt="accelLat">
</div>
<div class="title">Figure 24. Distance a vehicle will cover when applying the "Stated Braking Pattern" with <em>ρ<sub>vehicle</sub> = 2 s</em></div>
</div>
<div class="paragraph">
<p><a href="#Figure:LateralDistance">Distance a vehicle will cover when applying the "Stated Braking Pattern" with <em>ρ<sub>vehicle</sub> = 2 s</em></a> shows the required safety distance, without
considering the fluctuation margin, each car needs to keep to the lane border
so the vehicles can pass without lateral conflict. With an assumed minimal lane
width of 3 meters and an assumed vehicle width of 2 meters, the distance from
vehicle edge to lane border is 0.5 meter if the car is driving exactly in the
middle of the lane.</p>
</div>
<div class="paragraph">
<p>Hence, the required safety distance must be at most 0.5 meter. When using the
same values for acceleration and deceleration this will lead to
<em>&#945;<sup>lat</sup><sub>accel,max</sub> &lt; 0.1 m/s<sup>2</sup></em>. But when restricting the acceleration
to that value a lane change will take almost 8 seconds.</p>
</div>
<div class="paragraph">
<p>As a result it is advisable, to use a higher deceleration than acceleration to
keep the required safety margin and allow for faster lane changes. E.g.
<em>&#945;<sup>lat</sup><sub>brake,min</sub> = 0.8 m/s<sup>2</sup></em> and <em>&#945;<sup>lat</sup><sub>accel,max</sub> = 0.2 m/s<sup>2</sup></em>
will fulfill the given safety distance requirement. An increase to higher
acceleration values is for the given constraints not possible, as the  distance
covered during response time is already 0.4 meters.</p>
</div>
<div class="paragraph">
<p>It is obvious that given the lateral safety definition a lane change will at
least have a duration of two times the response time.</p>
</div>
<div class="paragraph">
<p>The lateral distance requirement is very strict, therefore it is required to
also come up with a desirably small value for the required lateral safety
margin <em>&#948;<sup>lat</sup><sub>min</sub></em>. As this should only cover for fluctuations, there
is also no need for a huge margin. Thus initially this value will be set to
<em>&#948;<sup>lat</sup><sub>min</sub> = 10 cm</em>. This value should be able to cover small
fluctuations, but will not have a big impact on the safety distance.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>As a starting point the values are set to:</p>
</div>
<table id="Table:InitialParameters" class="tableblock frame-topbot grid-all spread">
<caption class="title">Table 1. Chosen Default Parameters</caption>
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Value</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>&#961;<sub>ego</sub></em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>1 s</em></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>&#961;<sub>other</sub></em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>2 s</em></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>&#945;<sub>accel,max</sub></em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>3.5 m/s<sup>2</sup></em></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>&#945;<sub>brake,min</sub></em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>4 m/s<sup>2</sup></em></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>&#945;<sub>brake,max</sub></em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>8 m/s<sup>2</sup></em></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>&#945;<sub>brake,min,correct</sub></em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>3 m/s<sup>2</sup></em></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>&#945;<sup>lat</sup><sub>brake,min</sub></em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>0.8 m/s<sup>2</sup></em></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>&#945;<sup>lat</sup><sub>accel,max</sub></em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>0.2 m/s<sup>2</sup></em></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>&#948;<sup>lat</sup><sub>min</sub></em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>10 cm</em></p></td>
</tr>
</tbody>
</table>
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_terminology">8. Terminology</h2>
<div class="sectionbody">
<table id="Table::Terminology" class="tableblock frame-topbot grid-all spread">
<caption class="title">Table 2. Terminology</caption>
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Term</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">AD</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Automated Driving</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ADS</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Automated Driving System</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">HLD</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">High Level Design</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Long</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Longitudinal</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Lat</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Lateral</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">RSS</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Responsibility-Sensitive Safety</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ad-rss-lib</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The C++ library for RSS</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect1">
<h2 id="_references">9. References</h2>
<div class="sectionbody">
<table id="Table::References" class="tableblock frame-topbot grid-all spread">
<caption class="title">Table 3. References</caption>
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Ref</th>
<th class="tableblock halign-left valign-top">Document Name</th>
<th class="tableblock halign-left valign-top">Version</th>
<th class="tableblock halign-left valign-top">Location</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">On a Formal Model of Safe and Scalable Self-driving Cars</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">v6</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://arxiv.org/abs/1708.06374" class="bare">https://arxiv.org/abs/1708.06374</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Implementing the RSS Model on NHTSA Pre-Crash Scenarios</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">July 2018</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://www.mobileye.com/responsibility-sensitive-safety/rss_on_nhtsa.pdf" class="bare">https://www.mobileye.com/responsibility-sensitive-safety/rss_on_nhtsa.pdf</a></p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect1">
<h2 id="_revision_history">10. Revision History</h2>
<div class="sectionbody">
<table id="Table::RevisionHistory" class="tableblock frame-topbot grid-all spread">
<caption class="title">Table 4. Documentation Revision History</caption>
<colgroup>
<col style="width: 12.5%;">
<col style="width: 12.5%;">
<col style="width: 25%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Revision</th>
<th class="tableblock halign-left valign-top">Date</th>
<th class="tableblock halign-left valign-top">Author(s)</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">1.5</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2019-11-21</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Fabian Oboril</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Changed license to LGPL-2.1</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">1.2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2019-03-26</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Bernd Gassmann</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Release update of version number</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">1.1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2019-03-20</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Bernd Gassmann</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Harmonized naming of library and git repository</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">1.0</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2019-02-28</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Cornelius Buerkle, Bernd Gassmann, Fabian Oboril, Peter van Beek</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Initial version</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect1">
<h2 id="_build_ad_rss_lib_and_documentation">11. Build ad-rss-lib and documentation</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_build_instructions">11.1. Build instructions</h3>
<div class="paragraph">
<p>The ad-rss-lib is built with a standard cmake toolchain. Therefore, run the
following commands, to build the library and documentation:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="Bash">mkdir build
cd build
cmake ..
make
cmake -DBUILD_DOC=1 ..
make apidoc # optional, if API documentation is desired</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_generate_pdf_document">11.2. Generate PDF document</h3>
<div class="paragraph">
<p>To generate a PDF for this document, it is recommended to use asciidoctor-pdf
(<a href="https://asciidoctor.org">Asciidoctor</a>).
Therefore, the following commands have to be executed:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="Bash">sudo apt-get install asciidoctor
sudo -E gem install asciidoctor-pdf --pre
sudo -E gem install coderay
asciidoctor-pdf ./doc/Main.adoc -n</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_generate_html_document">11.3. Generate HTML document</h3>
<div class="paragraph">
<p>To generate a HTML for this document, the following commands have to be executed:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="Bash">sudo apt-get install asciidoctor
asciidoctor doc/Main.adoc -d book -b html5 -n</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Version 1.2<br>
Last updated 2019-11-22 13:59:36 UTC
</div>
</div>
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  messageStyle: "none",
  tex2jax: {
    inlineMath: [["\\(", "\\)"]],
    displayMath: [["\\[", "\\]"]],
    ignoreClass: "nostem|nolatexmath"
  },
  asciimath2jax: {
    delimiters: [["\\$", "\\$"]],
    ignoreClass: "nostem|noasciimath"
  },
  TeX: { equationNumbers: { autoNumber: "none" } }
});
</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.6.0/MathJax.js?config=TeX-MML-AM_HTMLorMML"></script>
</body>
</html>